/*
FASHION: Style + Smarts ------------------------------------------------------
Copyright (c) 2014 Keaton Brandt
Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:
The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
------------------------------------------------------------------------------
 */
!function(){var e,t;e=window.fashion={version:"0.3",url:"http://writefashion.org",author:"Keaton Brandt",mimeType:"text/x-fashion",cssId:"FASHION-stylesheet",minifiedObject:"FSMIN",runtimeObject:"FASHION",runtimeModules:[]},window.fashion.runtimeConfig={variableObject:"style",idPrefix:"FS-",individualCSSID:"FASHION-individual",cssId:window.fashion.cssId},t=function(e,t){return setTimeout(t,e)},window.fashion.addProperty=function(e,t,n){return null==n&&(n=!1),t instanceof h||(t=new h(t)),!n&&window.fashion.$properties[e]?new Error("There is already a property named "+e):window.fashion.$properties[e]=t},window.fashion.addProperties=function(e,t){var n,i,r,o,a;for(null==t&&(t=!1),a=[],i=r=0,o=e.length;o>r;i=++r)n=e[i],a.push(window.fashion.addProperty(n,i,t));return a},window.fashion.addFunction=function(e,t,n){return null==n&&(n=!1),t instanceof c||(t=new c(t)),!n&&window.fashion.$functions[e]?new Error("There is already a function named "+e):window.fashion.$functions[e]=t},window.fashion.addFunctions=function(e,t){var n,i,r,o,a;for(null==t&&(t=!1),a=[],i=r=0,o=e.length;o>r;i=++r)n=e[i],a.push(window.fashion.addFunction(n,i,t));return a},window.fashion.addGlobal=function(e,t,n){return null==n&&(n=!1),t instanceof p||(t=new p(t)),!n&&window.fashion.$globals[e]?new Error("There is already a global named "+e):window.fashion.$globals[e]=t},window.fashion.addGlobals=function(e,t){var n,i,r,o,a;for(null==t&&(t=!1),a=[],i=r=0,o=e.length;o>r;i=++r)n=e[i],a.push(window.fashion.addGlobal(n,i,t));return a},window.fashion.addBlock=function(e,t,n){return null==n&&(n=!1),t instanceof d||(t=new d(t)),!n&&window.fashion.$blocks[e]?new Error("There is already a block named "+e):window.fashion.$blocks[e]=t},window.fashion.addBlocks=function(e,t){var n,i,r,o,a;for(null==t&&(t=!1),a=[],i=r=0,o=e.length;o>r;i=++r)n=e[i],a.push(window.fashion.addBlock(n,i,t));return a};var n;window.fashion.live={loadedEvent:"fashion-loaded"},n=document.currentScript||document.scripts[document.scripts.length-1],document.addEventListener("readystatechange",function(){return"complete"===document.readyState?window.fashion.$loader.loadStyles(function(t){var n,i,r,o,a,s;return a=(new Date).getTime(),o=window.fashion.$parser.parse(t),o=window.fashion.$processor.process(o),s=window.fashion.$actualizer.actualize(o),n=s.css,r=s.js,console.log("[FASHION] Compile finished in "+((new Date).getTime()-a)+"ms"),a=(new Date).getTime(),e.$dom.addStylesheet(n),e.$dom.addScript(r),console.log("[FASHION] Page initialize finished in "+((new Date).getTime()-a)+"ms"),i=new Event(window.fashion.live.loadedEvent),i.variableObject=window[window.fashion.variableObject],document.dispatchEvent(i)}):void 0});var i=[].slice;window.fashion.$extend=function(e,t){var n,i,r;r=[];for(n in t)i=t[n],r.push(e[n]?void 0:e[n]=i);return r},window.fashion.$combine=function(){var e,t,n,r,o;for(t=1<=arguments.length?i.call(arguments,0):[],n={},r=0,o=t.length;o>r;r++)e=t[r],window.fashion.$extend(n,e);return n},window.fashion.$dom={addElementToHead:function(e){var t;return t=document.head||document.getElementsByTagName("head")[0],t.appendChild(e)},addStylesheet:function(t,n){var i,r,o,a;null==n&&(n=window.fashion.cssId),r=document.createElement("style"),r.setAttribute("type","text/css"),r.setAttribute("id",""+n),e.$dom.addElementToHead(r),o=t.split("\n"),a=[];for(n in o)i=o[n],i.length>3&&a.push(r.sheet.insertRule(i,n));return a},addScript:function(t){var n;return n=document.createElement("script"),n.setAttribute("type","text/javascript"),n.text=t,e.$dom.addElementToHead(n)},incrementSheetIndex:function(e){var t;return t=parseInt(e.getAttribute("data-count")),e.setAttribute("data-count",t+1),t},getSheetIndex:function(e){return parseInt(e.getAttribute("data-index"))}},window.fashion.$stringify=function(e){if(e instanceof Array)return window.fashion.$stringifyArray(e);switch(typeof e){case"string":return JSON.stringify(e);case"object":return window.fashion.$stringifyObject(e);case"number":return e;case"undefined":return"undefined";default:return e.toString()}},window.fashion.$stringifyObject=function(e){var t,n,i;t=[];for(n in e)i=e[n],e.hasOwnProperty(n)&&(n=n.replace("'","'"),t.push("'"+n+"': "+window.fashion.$stringify(i)));return"{"+t.join(",")+"}"},window.fashion.$stringifyArray=function(e){var t,n,i,r;for(t=[],i=0,r=e.length;r>i;i++)n=e[i],t.push(window.fashion.$stringify(n));return"["+t.join(",")+"]"};var r;r=function(){function e(e){var t,n,i;if(this.variables={},this.selectors=[],this.blocks=[],this.scripts=[],this.dependencies={blocks:{},globals:{},functions:{},properties:{}},this.bindings={variables:{},globals:{},dom:[]},e){i=e.variables;for(t in i)n=i[t],this.variables[t]=n}}return e.prototype.addVariable=function(e){var t,n;if(n=e.name,delete e.name,t=e.scope||0,delete e.scope,!n)throw new Error("Variables must be named");return this.variables[n]||(this.variables[n]={}),this.variables[n][t]=e,this.bindings.variables[n]=[]},e.prototype.addSelector=function(e){return e.index=this.selectors.length,this.selectors.push(e)},e.prototype.addScript=function(e){return this.scripts.push(e)},e.prototype.addBlock=function(e){return this.blocks.push(e)},e.prototype.addBlockDependency=function(e,t){return this.dependencies.blocks[e]=t},e.prototype.addGlobalDependency=function(e,t){return this.dependencies.globals[e]=t},e.prototype.addFunctionDependency=function(e,t){return this.dependencies.functions[e]=t},e.prototype.addPropertyDependency=function(e,t){return this.dependencies.properties[e]=t},e.prototype.addVariableBinding=function(e,t){return this.bindings.variables[t]||(this.bindings.variables[t]=[]),this.bindings.variables[t].push(e)},e.prototype.addGlobalBinding=function(e,t){return this.bindings.globals[t]||(this.bindings.globals[t]=[]),this.bindings.globals[t].push(e)},e.prototype.addDOMBinding=function(e,t,n,i){return this.bindings.dom.push({watch:[n,i],rel:t,bind:e})},e.prototype.forEachVariable=function(e){var t,n,i,r,o;o=this.variables;for(t in o){i=o[t];for(n in i)if(r=i[n],e.call(r,r,n)===!1)return}},e.prototype.forEachMatchingSelector=function(e,t){var n,i,r,o;for(o=this.selectors,i=0,r=o.length;r>i;i++)if(n=o[i],n.name===e&&t.call(this,n)===!1)return},e}(),window.fashion.$class||(window.fashion.$class={}),window.fashion.$class.ParseTree=r;var o;o=function(){function e(e,t,n){null==n&&(n=0),"$"===e[0]&&(e=e.substr(1)),this.name=e,this.raw=this.value=t,this.scope=n,this.topLevel=0===n}return e.prototype.annotateWithType=function(e,t,n){return this.type=e,this.unit=t,n?this.value=n:void 0},e}(),window.fashion.$class.Variable=o;var a;a=function(){function t(t,n){this.rawName=this.name=t,this.properties=[],this.index=-1,this.mode=n?n:t instanceof l?e.$runtimeMode.dynamic:e.$runtimeMode["static"]}return t.prototype.addToBody=function(e){return this.body||(this.body=""),this.body+=e},t.prototype.addProperty=function(e){return this.body=void 0,e.id||(e.id=this.properties.length),this.properties.push(e)},t.prototype.insertProperty=function(e,t){return this.body=void 0,e.id||(e.id=this.properties.length),this.properties.splice(t,0,e)},t.prototype.forEachPropertyNamed=function(e,t){var n,i,r,o;for(o=this.properties,i=0,r=o.length;r>i;i++)if(n=o[i],n.name===e&&t.call(this,n)===!1)return},t}(),window.fashion.$class.Selector=a;var s,u;s=function(){function t(t,n,i,r){null==i&&(i=e.$runtimeMode["static"]),this.name=t,this.mode=i,r?"object"!=typeof n?this.value={value:n,transition:r}:(this.value=n,this.value.transition=r):this.value=n}return t.prototype.copyWithName=function(e){return new t(e,this.value,this.mode)},t}(),u=function(){function e(e,t,n){this.easing=e,this.duration=t,this.delay=n}return e}(),window.fashion.$class.Property=s,window.fashion.$class.PropertyTransition=u;var l;l=function(){function e(e,t,n,i){this.script=e.toString(),this.setter=-1!==this.script.indexOf("="),this.mode=i,this.type=t,this.unit=n}return e.prototype.generate=function(){var e;try{return this.evaluate=Function("v","g","f","t","e",this.script)}catch(t){return e=t,console.log("[FASHION] Could not compile script '"+this.script+"'"),console.log(e)}},e}(),window.fashion.$class.Expression=l;var d,c,p,f,h,m,w={}.hasOwnProperty,v=function(e,t){function n(){this.constructor=e}for(var i in t)w.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};f=function(){function t(t){this.mode=t.mode||t.runtimeMode||e.$runtimeMode["static"],this.runtimeCapabilities=t.runtimeCapabilities||t.capabilities,t.watcherFunction&&(!(this.mode|e.$runtimeMode.dynamic)||this.mode|e.$runtimeMode.live?console.log("[FASHION] Static/live modules cannot have watcher functions."):this.watch=t.watcherFunction)}return t}(),m=function(t){function n(t){this.type=t.type||t.output||t.outputType||e.$type.String,this.unit=t.unit||"",this.get=t.get||t.evaluate,n.__super__.constructor.call(this,t)}return v(n,t),n}(f),p=function(t){function n(t){this.watch=t.watch,t.mode||(t.mode=e.$runtimeMode.globalDynamic),n.__super__.constructor.call(this,t)}return v(n,t),n}(m),c=function(e){function t(e){void 0!==e.unitFrom&&(this.unitFrom=e.unitFrom,delete e.unit),t.__super__.constructor.call(this,e)}return v(t,e),t}(m),d=function(e){function t(e){"function"==typeof e?this.compile=e:(this.compile=e.compileFunction||e.compile,this.runtimeObject=e.runtimeObject||e.runtime,this.runtimeCapabilities=e.runtimeCapabilities||e.capabilities)}return v(t,e),t}(f),h=function(t){function n(t){"function"==typeof t?this.compile=t:(this.compile=t.compileFunction||t.compile,this.apply=t.applyFunction||t.apply,this.apply&&(t.mode=e.$runtimeMode.individual),this.replace=t.replace||!1,this.runtimeObject=t.runtimeObject||t.runtime,this.mode=t.mode,this.runtimeCapabilities=t.runtimeCapabilities||t.capabilities)}return v(n,t),n}(f),window.fashion.$class||(window.fashion.$class={}),window.fashion.$class.GlobalModule=p,window.fashion.$class.FunctionModule=c,window.fashion.$class.BlockModule=d,window.fashion.$class.PropertyModule=h,window.fashion.$type={None:0,Number:1,String:2,Color:3,Element:4,KGeneric:100,KDisplay:101,KCenter:102,KListStyle:103,KLineStyle:104,KInset:105,Unknown:255},window.fashion.$unit={Number:{"":!1," ":!1,px:"px",pt:"pt","%":"%",em:"em",ex:"ex",cm:"cm",mm:"mm","in":"in",pt:"pt",pc:"pc",ch:"ch",rem:"rem",vh:"vh",vw:"vw",vmin:"vmin",vmax:"vmax",ms:"ms",s:"s"}},window.fashion.$typeConstants={colors:["aqua","black","blue","fuchsia","gray","green","lime","maroon","navy","olive","purple","red","silver","teal","white","yellow"]},window.fashion.$runtimeMode={"static":0,dynamic:1,scoped:3,globalDynamic:17,individual:7,live:9,generate:function(e,t,n,i,r){return(e?1:0)|(t?7:0)|(n?9:0)|(i?3:0)|(r?17:0)}},window.fashion.$loader={loadStyles:function(t){var n,i,r;return i=e.$loader.countScripts(),r=0,n="",e.$loader.loadIndividualStyles(function(e){return n+=e,++r===i?t(n):void 0})},loadIndividualStyles:function(e){return window.fashion.$loader.loadStyleTags(e)},loadStyleTags:function(t){var n,i,r,o,a,s,u;for(i=document.getElementsByTagName("style"),u=[],n=a=0,s=i.length;s>=0?s>a:a>s;n=s>=0?++a:--a)r=i[n].getAttribute("type"),r===window.fashion.mimeType&&(""!==i[n].textContent?u.push(t(i[n].textContent)):""!==i[n].getAttribute("src")?(o=i[n].getAttribute("src"),u.push(e.$loader.loadExternalScript(o,t))):u.push(void 0));return u},countScripts:function(){var e,t,n,i,r,o,a,s,u;for(e=0,i=document.getElementsByTagName("style"),t=o=0,s=i.length;s>=0?s>o:o>s;t=s>=0?++o:--o)r=i[t].getAttribute("type"),r===window.fashion.mimeType&&e++;for(n=document.getElementsByTagName("link"),t=a=0,u=n.length;u>=0?u>a:a>u;t=u>=0?++a:--a)r=n[t].getAttribute("type"),r===window.fashion.mimeType&&e++;return e},loadExternalScript:function(e,t){var n;return n=new XMLHttpRequest,n.onreadystatechange=function(){return 4===n.readyState&&200===n.status?t(n.responseText):n.status>400?console.log("[FASHION] Could not load script: "+e+" ("+n.status+")"):void 0},n.open("GET",e,!0),n.send()}},window.fashion.$parser={parse:function(t,n){var i,o,a,s;o=new r(n),t=e.$parser.removeComments(t),o=e.$parser.parseSections(t,o),s=o.selectors;for(i in s)a=s[i],e.$parser.parseSelectorBody(a.body,a,o);return o}},window.fashion.$parser.removeComments=function(e){return e.replace(/\/\*.*?\*\/|\/\/.*?\n/g,"")},window.fashion.$parser.addVariable=function(t,n,i,r){var a,s,u,d,c,p;if(i=e.$parser.parseSingleValue(i,"$"+n,t,!0),p=new o(n,i,r),t.addVariable(p),i instanceof l)a=i.type,u=i.unit;else{if(c=p.raw||p.value,!c)return;a=window.fashion.$shared.determineType(c,e.$type,e.$typeConstants),d=window.fashion.$shared.getUnit(c,a,e.$type,e.$unit),s=d.value,u=d.unit}return p.annotateWithType(a,u,s)},window.fashion.$parser.splitByTopLevelCommas=function(e){var t,n,i,r,o;for(n=0,t="",r=[],i=/(\(|\)|\,|[^\(\)\,]+)/g;o=i.exec(e);)","!==o[0]||0!==n?("("===o[0]&&n++,")"===o[0]&&n--,t+=o[0]):(r.push(t),t="");return r.push(t),r},window.fashion.$parser.splitByTopLevelSpaces=function(e){var t,n,i,r,o,a,s,u;for(i=0,s=r=n=!1,t="",a=[],o=/([^\(\)\"\'\`\s]*\(|\)|\"|\'|\`|([^\`\s]+(\s+[\+\-\/\*\=]\s+|[\+\-\/\*\=]))+[^\`\s]+|\s+(\&\&|\|\|)\s+|\s|[^\(\)\"\'\`\s]+)/g;u=o.exec(e);)" "!==u[0]||0!==i||s||r||n?("("===u[0][u[0].length-1]&&i++,")"===u[0]&&i--,"'"!==u[0]||r||n||(s=!s),'"'!==u[0]||s||n||(r=!r),"`"!==u[0]||r||s||(n=!n),t+=u[0]):(a.push(t),t="");return a.push(t),a},window.fashion.$parser.parseSections=function(t,n){var i,r,o,a;for(r=/([\s]*(\$([\w\-]+)\:[\s]*(.*?)[;\n]|\@([\w\-]+)[\s]*(.*?)[\s]*\{|(.*?)[\s]*?\{)|\{|\})/g;(o=r.exec(t))&&!(o.length<8)&&o[0];)o[3]&&o[4]?e.$parser.addVariable(n,o[3],o[4]):o[5]?(a=o.index+o[0].length,i=o[6]?e.$parser.splitByTopLevelSpaces(o[6]):[],n.addBlock({type:o[5],arguments:i,body:window.fashion.$parser.parseBlock(t,r,a)}),n.addBlockDependency(o[5],e.$blocks[o[5]])):o[7]?window.fashion.$parser.parseSelector(n,t,o[7],r,o.index+o[0].length):console.log("There's a problem somewhere in your file. Sorry.");return n},window.fashion.$parser.parseSelector=function(t,n,i,r,o){var a,s,u,l,d;for(l=[e.$parser.createSelector(t,i)],a=1,u=[0];a>0&&(s=r.exec(n));)d=l[u[u.length-1]],d.addToBody(n.substring(o,s.index)),o=s.index+s[0].length,"}"===s[0]?(u.pop(),a--):s[3]&&s[4]?d.addToBody(n.substring(s.index,o)):s[7]&&(i=e.$parser.nestSelector(d.rawName,s[7]),l.push(e.$parser.createSelector(t,i)),u.push(l.length-1),a++);return l},window.fashion.$parser.nestSelector=function(e,t){var n,i,r,o,a,s,u,l,d;for(n=[],l=e.split(","),o=0,s=l.length;s>o;o++)for(r=l[o],r=r.trim(),d=t.split(","),a=0,u=d.length;u>a;a++)i=d[a],i=i.trim(),n.push("&"===i[0]?r+i.substr(1):r+" "+i);return n.join(",")},window.fashion.$parser.createSelector=function(t,n){var i,r,o,s,u,d,c,p,f;if(c=new a(n),t.addSelector(c),-1===n.indexOf("$"))return c;for(o=!1,d="return ",s=0,u=/\$([\w\-]+)/g;r=u.exec(n);)r.index>s&&(d+="'"+n.substring(s,r.index)+"'+"),s=r.index+r[0].length,i=e.$parser.expressionExpander.localVariable,f=i(r[1],c.index,t),o|=f.individualized||!1,d+=f.script+"+";return n.length>s&&(d+="'"+n.substr(s)+"'+"),p=d.substr(0,d.length-1),c.mode=e.$runtimeMode.dynamic,c.name=new l(p,e.$type.String,0,!0,o),c.name.generate(),c},window.fashion.$parser.parseBlock=function(e,t,n){var i,r,o;for(i=1,r=n;i>0&&(o=t.exec(e));)r=o.index+o[0].length,"}"===o[0]?i--:"{"===o[0]?i++:o[5]?i++:o[7]&&i++;return e.substring(n,r-1).trim()},window.fashion.$parser.parseSelectorBody=function(t,n,i){var r,o,a,l,d,c,p,f,h;for(d=0,c=/[\s]*(\$?[\w\-\s]*)\:[\s]*(\[([\w\-\$\@]*)[\s]*([\w\-\$\@\%]*)[\s]*([\w\-\$\@\%]*)\]){0,1}[\s]*([^;}\n]*?)[\s]*(!important)?[;}\n]/g,h=[];l=c.exec(t);)p=void 0,l.length<7||(r=[n.index,d],f=e.$parser.parsePropertyValues(l[6],r,i),a=l[1],"$"!==a[0]?(l[3]&&(p=new u(e.$parser.parsePropertyValue(l[3],r,i,!1),e.$parser.parsePropertyValue(l[4],r,i,!1),e.$parser.parsePropertyValue(l[5],r,i,!1))),"!important"===l[7]&&("string"==typeof f&&(f+=" !important"),"object"==typeof f&&(f.important=!0)),o=n.mode|f.mode||0,n.addProperty(new s(a,f,o,p)),h.push(d++)):e.$parser.parseScopedVariable(a,f,l,n.name,i));return h},window.fashion.$parser.parseScopedVariable=function(t,n,i,r,o){if("array"==typeof n&&"array"==typeof n[0])throw new Error("Variable declaration '"+t+"' cannot have comma separated values");if(i[3])throw new Error("Variable declaration '"+t+"' cannot have a transition");if(i[7])throw new Error("Variable declaration '"+t+"' cannot be !important");return e.$parser.addVariable(o,t,n,r)},window.fashion.$parser.parsePropertyValues=function(e,t,n){var i,r;if(-1!==e.indexOf(",")){if(e=window.fashion.$parser.splitByTopLevelCommas(e),1===e.length)return window.fashion.$parser.parsePropertyValue(e[0],t,n);for(i in e)r=e[i],e[i]=r.trim();for(i in e)r=e[i],e[i]=window.fashion.$parser.parsePropertyValue(r,t,n,!0,!0);return e}return window.fashion.$parser.parsePropertyValue(e,t,n)},window.fashion.$parser.parsePropertyValue=function(t,n,i,r,o){var a,s,u,l,d,c;if(null==r&&(r=!0),null==o&&(o=!1),o||"string"==typeof t&&-1!==t.indexOf(" ")){if(a=e.$parser.splitByTopLevelSpaces(t),!o&&1===a.length)return window.fashion.$parser.parseSingleValue(t,n,i);for(l=function(){var t,r,o;for(o=[],t=0,r=a.length;r>t;t++)s=a[t],o.push(e.$parser.parseSingleValue(s,n,i));return o}(),l.mode=0,d=0,c=l.length;c>d;d++)u=l[d],l.mode|=u.mode||0;return l}return window.fashion.$parser.parseSingleValue(t,n,i)},window.fashion.$parser.identifyExpression=function(){return/(([\s][\+\-\/\*\=][\s])|\s(\&\&|\|\|)\s|[\(\)\[\]]|\@|\$)/g},window.fashion.$parser.parseSingleValue=function(t,n,i,r){return null==r&&(r=!1),t&&"string"==typeof t&&t.match(e.$parser.identifyExpression())?window.fashion.$parser.parseExpression(t,n,i,window.fashion.$functions,window.fashion.$globals,!0,r):t},window.fashion.$parser.parseExpression=function(t,n,i,r,o,a,s){var u,d,c,p,f,h,m,w,v,g,b,y,$,S,x,I,O,F,N,T,M,z,A;for(null==a&&(a=!0),null==s&&(s=!1),p=e.$parser.expressionExpander,w=window.fashion.$parser.matchParenthesis,y=t,v=e.$runtimeMode["static"],N=[],M=[],h=!1,$=0,b=function(t,n,i){return y=e.$parser.spliceString(y,t+$,n,i),$+=i.length-n},g=/(\$([\w\-]+)\s*?\=|\@(self|this|parent)\.?([a-zA-Z0-9\-\_\.]*)|\$([\w\-]+)|\@([\w\-]+)|([\-]{0,1}([\.]\d+|\d+(\.\d+)*)[a-zA-Z]{1,4})|([\w\-\@\$]*)\(|\)([\S]*))/g,x=!1;!x&&(S=g.exec(t));)d=void 0,I=S.index,m=S[0].length,c=I+m,S[2]?(d=p.localVariable(S[2],n,i,!0),h=!0):S[3]?d=p.relativeObject(S[3],S[4]):S[5]?d=p.localVariable(S[5],n,i):S[6]?d=p.globalVariable(S[6],n,o,i):S[7]?d=p.numberWithUnit(S[7]):S[10]&&(z=w(g,t,c),u=z.body,O=z.unit,u||(u=t.substring(c,t.length-1),x=!0),m+=u.length+1,O&&(m+=O.length),d=p["function"](S[10],u,O,n,i,r,o)),d&&(d.script&&b(I,m,d.script),d.mode&&(v|=d.mode),N.push(void 0===d.type?e.$type.Unknown:d.type),M.push(d.unit||""));return A=e.$parser.determineExpressionType(N,M,t),F=A.type,T=A.unit,h&&(T=void 0),y=e.$parser.wrapExpressionScript(y,a,F,T,s),f=new l(y,F,T,v),a&&f.generate(),f},window.fashion.$parser.wrapExpressionScript=function(e,t,n,i,r){return t?!r&&i&&"string"==typeof i?"return ("+e+") + '"+i+"'":"return "+e:"{value: "+e+", type: "+n+", unit: '"+i+"'}"},window.fashion.$parser.spliceString=function(e,t,n,i){return e.substr(0,t)+i+e.substr(t+n)},window.fashion.$parser.matchParenthesis=function(e,t,n){var i,r,o,a;for(r=0,i="",o=n;a=e.exec(t);)if(-1!==a[0].indexOf("("))r++;else{if(-1!==a[0].indexOf(")")&&0===r--)return i+=t.substr(o,a.index-o),{body:i,unit:a[11]};i+=t.substr(o,a.index-o+a[0].length),o=a.index+a[0].length}return console.log("[FASHION] Could not match parens: "+t)},window.fashion.$parser.determineExpressionType=function(t,n,i){var r,o,a,s,u;o=a=void 0;for(r in t)if(s=t[r],s!==e.$type.Unknown){if(o){if(s!==o){if(s!==e.$type.String)return console.log("[FASHION] Found mixed types in expression: '"+i+"'"),{};o=e.$type.String}}else o=s;if(s===e.$type.Number||s===e.$type.Color){if(u=n[r],""===u)continue;if(a){if(u!==a)return console.log("[FASHION] Conflicting units '"+u+"' and '"+typeUnit[1]+"'"),console.log("[FASHION] Unit conversion will be implemented in the future"),{}}else a=u}}return{type:o,unit:a}},window.fashion.$parser.expressionExpander={localVariable:function(t,n,i,r){var o,a,s,u,d,c,p,f,h,m;if(null==r&&(r=!1),m=i.variables,c=m[t],!c)return console.log("[FASHION] Variable $"+t+" does not exist.");o=!1,p=f=-1;for(d in c)h=c[d],0!==d&&(a=!1),p=h.type,f=h.unit;return r?u="v('"+t+"'"+(o?",e":"")+").value =":(i.addVariableBinding(n,t),u="v('"+t+"'"+(o?",e":"")+").value"),s=e.$runtimeMode.generate(!0,o),new l(u,p,f,s)},globalVariable:function(e,t,n,i){var r,o;return e=e.toLowerCase(),(o=n[e])?(i.addGlobalDependency(e,o),i.addGlobalBinding(t,e),r="g."+e+".get()",new l(r,o.type,o.unit,o.mode)):console.log("[FASHION] Variable $"+e+" does not exist.")},numberWithUnit:function(t){var n,i,r;return n=window.fashion.$type.Number,i=e.$runtimeMode["static"],r=window.fashion.$shared.getUnit(t,n,e.$type,e.$unit),0/0===r.value&&(r.value=0),new l(r.value,n,r.unit,i)},relativeObject:function(t,n){var i,r,o,a,s;return"parent"===t&&(n=".parent"+n),i=n.split("."),r=i[i.length-1],null==n?a=e.$type.Element:"top"===r||"bottom"===r||"left"===r||"right"===r||"number"===r||"width"===r||"height"===r?(a=e.$type.Number,s="px"):a=e.$type.String,o=n?"e('"+n+"','"+t+"')":"e(void 0, "+JSON.stringify(t)+")",new l(o,a,s,e.$runtimeMode.individual)},"function":function(e,t,n,i,r,o,a){var s,u,d,c,p,f,h,m,w,v,g,b,y,$,S,x,I;if(y=r.variables,f=o[e],!f)return console.log("[FASHION] Function $"+e+" does not exist.");if(t.length>1){for(d=window.fashion.$parser.splitByTopLevelCommas(t),p=[],m=[],$=0,x=d.length;x>$;$++)s=d[$],(u=s.match(/([a-zA-Z0-9\-\'\"]+)\s*\:\s*(.*)/))?(w="'"+u[1]+"': ",w+=window.fashion.$parser.parseExpression(u[2],i,r,o,a,0).script,m.push(w)):p.push(window.fashion.$parser.parseExpression(s,i,r,o,a,!1));m.length>0&&p.push({script:"{"+m.join(",")+"}"})}else p=[];for(g=["t"],h=f.mode,S=0,I=p.length;I>S;S++)c=p[S],null!=c.script&&(h|=c.mode,g.push(c.script));return b=""!==f.unit?f.unit:void 0!==f.unitFrom?p[f.unitFrom].unit:"",r.addFunctionDependency(e,f),v="f['"+e+"'].get.call("+g.join(",")+")",new l(v,f.type,n||b,h)}},window.fashion.$processor={process:function(t){return t=window.fashion.$processor.blocks(t,e.$blocks),t=window.fashion.$processor.properties(t,e.$properties)}},window.fashion.$processor.api={throwError:function(e,t){return console.log("[FASHION: "+e+"] "+t)},setProperty:function(t,n,i,r){var o;return o=new s(i,r,r.mode||e.$runtimeMode["static"]),t.insertProperty(o,n+1)},getProperty:function(e,t,n){var i;return i=void 0,e.forEachMatchingSelector(t,function(e){return e.forEachPropertyNamed(n,function(e){return i?!1:i=e.value}),i?!1:void 0}),i},addRule:function(t,n,i){var r;return r=e.$parser.createSelector(t,n),e.$parser.parseSelectorBody(i+"\n",r,t)},addScript:function(e,t){return e.addScript(t)},parseValue:function(t){return t&&"string"==typeof t?e.$parser.parseSingleValue(t):""},determineType:function(t){return t.type?t.type:"string"==typeof t?window.fashion.$shared.determineType(t,e.$type,e.$typeConstants):e.$type.Unknown},determineUnit:function(t){return t.unit?t.unit:"string"==typeof t?window.fashion.$shared.getUnit(t,e.$type.Number,e.$type,e.$unit).unit:""}},window.fashion.$processor.blocks=function(e,t){var n,i,r,o,a,s;a=window.fashion.$processor.api,s=e.blocks;for(i in s)r=s[i],o=t[r.type],o&&(n={throwError:a.throwError.bind(0,r.type),addRule:a.addRule.bind(0,e),addScript:a.addScript.bind(0,e),parseValue:a.parseValue,parse:a.parseBody.bind(0,e),runtimeObject:e.dependencies.blocks[r.type].runtimeObject,addVariable:a.addVariable.bind(0,e)},o.compile.call(n,r.arguments,r.body));return e},window.fashion.$processor.api.parseBody=function(t,n){return e.$parser.parse(n,t)},window.fashion.$processor.api.addVariable=function(t,n,i){return e.$parser.addVariable(t,n,i)},window.fashion.$processor.properties=function(t,n){var i,r,o,a,s,u,l,d,c,p,f,h;for(r=window.fashion.$processor.api,f=t.selectors,l=0,c=f.length;c>l;l++)for(u=f[l],o=-1,h=u.properties,d=0,p=h.length;p>d;d++)a=h[d],o++,s=n[a.name],s&&(i={throwError:r.throwError.bind(0,a),setProperty:r.setProperty.bind(0,u,o),getProperty:r.getProperty.bind(0,t,u.name),parseValue:r.parseValue,determineType:r.determineType,determineUnit:r.determineUnit},s.mode===e.$runtimeMode.individual?(t.addPropertyDependency(a.name,s),a.mode|=e.$runtimeMode.individual):(n[a.name].compile.call(i,a.value),s.replace&&u.properties.splice(o--,1)));return t},window.fashion.$shared={},window.fashion.$shared.getVariable=function(e,t,n,i,r,o){var a;return a=e[r],a?"string"==typeof a||"number"==typeof a?{value:a}:a[0]?a[0]:a.scope&&a.scope.length>0?this.throwError("Scoped variables are not yet supported"):void 0!==a["default"]?a["default"].evaluate?{value:this.evaluate(a["default"],e,t,n,i,o)}:{value:a["default"]}:this.throwError("Variable '"+r+"' does not exist."):(console.log("[FASHION] Could not find variable '"+r+"'"),{value:void 0})},window.fashion.$shared.evaluate=function(e,t,n,i,r,o,a){var s,u,l,d,c,p,f;return null==a&&(a=!0),l=!1,u=function(e){return function(a){var s,u,d,c,p,f,h;if("string"==typeof a)return a;if("number"==typeof a)return a;if(p=[],c=function(o,a){var s;return s=e.getVariable(t,n,i,r,o,a),p.push({name:o,object:s,value:s.value}),s},null!=o&&(s=e.elementFunction(o)),a.evaluate){if(d=a.evaluate(c,n,i,r,s),a.important===!0&&(l=!0),a.setter)for(f=0,h=p.length;h>f;f++)u=p[f],u.object.value!==u.value&&e.setVariable(u.name,u.object.value);return d}return a.value?a.value:void 0}}(this),s=function(e,t){return t&&a?e+" !important":e},e instanceof Array?0===e.length?"":e[0]instanceof Array?s(function(){var t,n,i;for(i=[],t=0,n=e.length;n>t;t++)f=e[t],i.push(function(){var e,t,n;for(n=[],e=0,t=f.length;t>e;e++)p=f[e],n.push(u(p));return n}().join(" "));return i}().join(", "),l):(d=function(){var t,n,i;for(i=[],t=0,n=e.length;n>t;t++)c=e[t],i.push(u(c));return i}().join(" "),s(d,l)):s(u(e),l)};var g=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};window.fashion.$shared.determineType=function(e,t,n){var i,r;return"number"==typeof e?t.Number:(r=function(e){return'"'===e[0]||"'"===e[0]?t.String:e.charCodeAt(0)>47&&e.charCodeAt(0)<58||"-"===e[0]||"."===e[0]?t.Number:"#"===e[0]||0===e.toLowerCase().indexOf("rgb")?t.Color:i(e)||window.fashion.$type.Unknown},i=function(e){return n?n.colors&&g.call(n.colors,e)>=0?t.Color:void 0:t.Unknown},r(e))},window.fashion.$shared.getUnit=function(e,t,n,i){var r;return"number"==typeof e?{value:parseFloat(e),unit:""}:(r=function(){var t,n,r;return n=/([0-9\-\.]*)(.*?)/,t=n.exec(e),t.length<2?{value:parseFloat(e),unit:""}:(r=e.replace(t[1],""),i=i.Number[r],i?{value:parseFloat(t[1]),unit:i}:{value:parseFloat(t[1]),unit:""})},t===n.Number?r():(t===n.String&&("'"===e[0]||'"'===e[0])&&(e=e.substring(1,e.length-1)),{value:e,unit:""}))},window.fashion.$shared.timeInMs=function(e){return"ms"===e.unit?e.value:"s"===e.unit?1e3*e.value:parseInt(e.value)},window.fashion.color={cssTOjs:function(t,n){var i;return null==n&&(n=e.color),"#"===t[0]?n.hexTOrgb(t):(i=t.match(/rgba?\((.*?),(.*?),([^,]*),?(.*?)\)/))?{r:parseInt(i[1]),g:parseInt(i[2]),b:parseInt(i[3]),a:parseFloat(i[4]||1)}:void 0},hexTOrgb:function(e){var t,n;return void 0===e?{r:0,g:0,b:0}:(n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,e=e.replace(n,function(e,t,n,i){return t+t+n+n+i+i}),t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:{r:0,g:0,b:0})},rgbTOhex:function(e,t,n){var i,r;return"object"==typeof e&&(r=[e.r,e.g,e.b],e=r[0],t=r[1],n=r[2]),i=function(e){var t;return"string"==typeof e&&(e=parseInt(e)),t=e.toString(16),1===t.length?"0"+t.toUpperCase():t.toUpperCase()},"#"+i(parseInt(e))+i(parseInt(t))+i(parseInt(n))},hsbTOrgb:function(e,t,n){var i,r,o;return"object"==typeof e&&(o=[e.h,e.s,e.b],e=o[0],t=o[1],n=o[2]),r=Math,t/=100,n/=100,i=function(i){return 255*(t*n*r.max(r.min(r.abs((e+i)/60%6-3)-1,1),0)+n*(1-t))},{r:i(0),g:i(240),b:i(120)}},rgbTOhsb:function(e,t,n){var i,r,o,a,s,u,l,d,c,p,f,h;if("object"==typeof e&&(c=[e.r,e.g,e.b],e=c[0],t=c[1],n=c[2]),d=Math.max(e,t,n),e/=255,t/=255,n/=255,o=Math.max(e,t,n),a=Math.min(e,t,n),o===a)return{h:0,s:0,b:d/2.55};switch(s=o-a,a){case e:p=[t-n,3],l=p[0],r=p[1];break;case t:f=[n-e,5],l=f[0],r=f[1];break;case n:h=[e-t,1],l=h[0],r=h[1]}return i=60*(r-l/s)%360,u=s/o*100,{h:i,s:u,b:d/2.55}}},window.fashion.$actualizer={actualize:function(t){var n,i,r,o,a,s,u,l,d,c,p,f,h,m,w;return p=e.$runtimeMode,e.$actualizer.separateTransitions(t),m=e.$actualizer.regroupProperties(t),h=m.selectors,s=m.map,w=e.$actualizer.cullIndividuality(h,s),o=w.sel,r=w.map,a=w.offsets,d=e.$actualizer.filterStatic(o),u=e.$actualizer.addIndividualProperties(h,a),f=e.$actualizer.generateRuntimeData(t,d,u,r),e.$actualizer.addBindings(f,t,d,r),n=e.$actualizer.determineRuntimeCapabilities(f,h),e.$actualizer.addRuntimeFunctions(f,t,n),e.$actualizer.removeUnnecessaryModuleData(f),e.$actualizer.hideIndividualizedSelectors(o,t.scripts,u),i=e.$actualizer.createCSS(f,o),c=e.$actualizer.minifier.runtimeData(f),l=e.$actualizer.createJS(f,c,t.scripts),{css:i,js:l}}},window.fashion.$actualizer.createJS=function(t,n,i){return"/*\\\n|*| GENERATED BY FASHION "+e.version+"\n|*| "+e.url+" - "+e.author+"\n\\*/\nwindow."+e.minifiedObject+" = "+e.$stringify(n)+";\nwindow."+e.runtimeObject+" = "+e.$stringify({config:t.config,modules:t.modules,runtime:t.runtime,selectors:{},individual:{},variables:{}})+";\nFSEXPAND = "+e.$stringify(e.$actualizer.minifier.expandRuntimeData)+";\nFSEXPAND(window."+e.minifiedObject+",window."+e.runtimeObject+");\nFSREADY = function(r){d=document;c=\"complete\";\n	if(d.readyState==c)r()\n	else d.addEventListener('readystatechange',function(){if(d.readyState==c)r()})\n}\n"+i.join("\n")},window.fashion.$actualizer.regroupProperties=function(t){var n,i,r,o,a,s,u,l,d,c,p,f;for(i=[],n=[],f=t.selectors,l=0,c=f.length;c>l;l++)if(o=f[l],r=o.properties,r&&0!==r.length){for(e.$actualizer.groupPropertiesWithMode(r,e.$runtimeMode.dynamic),e.$actualizer.groupPropertiesWithMode(r,e.$runtimeMode.globalDynamic),e.$actualizer.groupPropertiesWithMode(r,e.$runtimeMode.live),e.$actualizer.groupPropertiesWithMode(r,e.$runtimeMode.individual),u=e.$actualizer.splitSelectorByModes(o),a=[],d=0,p=u.length;p>d;d++)s=u[d],s.index=i.length,i.push(s),a.push(i.length-1);n.push(a)}return{selectors:i,map:n}},window.fashion.$actualizer.groupPropertiesWithMode=function(e,t){var n,i,r,o,a,s,u,l,d,c;for(n=e[e.length-1].mode===t?1:0,c=[],a=l=d=e.length-2-n;l>=0;a=l+=-1)if(s=e[a],s.mode===t){for(o="-"===s.name[0]?2:0,u=s.name.split("-")[o].toLowerCase(),r=a+1;r<e.length-n&&(o="-"===e[r].name[0]?2:0,i=e[r].name.split("-")[o].toLowerCase(),i!==u);)r++;e.splice(a,1),e.splice(r-1,0,s),c.push(r===e.length-n?n++:void 0)}return c},window.fashion.$actualizer.splitSelectorByModes=function(e){var t,n,i,r,o,s;for(n=[],t=void 0,s=e.properties,r=0,o=s.length;o>r;r++)i=s[r],t&&t.mode===i.mode||(t=new a(e.name,i.mode),n.push(t)),t.addProperty(i);return n},window.fashion.$actualizer.cullIndividuality=function(t,n){var i,r,o,a,s,u,l,d,c,p,f,h,m,w;f=[],c={},r={},i=0;for(o in t)h=t[o],(h.mode&e.$runtimeMode.individual)===e.$runtimeMode.individual?(i++,r[o]=!0):(l=o-i,f.push(h)),c[o]=i;d=[],u=0;for(p in n)for(s=n[p],d.push([]),m=0,w=s.length;w>m;m++)a=s[m],d[p].push(r[a]===!0?"i"+u++:a-parseInt(c[a]));return{sel:f,map:d,offsets:c}},window.fashion.$actualizer.filterStatic=function(e){var t,n,i;n={};for(t in e)i=e[t],i.mode>0&&(n[t]=i);return n},window.fashion.$actualizer.addIndividualProperties=function(t,n){var i,r,o,a;o=[],r=e.$runtimeMode.individual;for(i in t)a=t[i],(a.mode&r)===r&&(a.index=i-n[i],o.push(a));return o};var b;b=function(){function t(t,n,i){this.config=e.runtimeConfig,this.selectors=n,this.variables=i,this.modules=t.dependencies,this.runtime={}}return t.prototype.addRuntimeModule=function(e){var t,n,i;i=e.functions;for(n in i){if(t=i[n],this.runtime[n])return;this.runtime[n]=t}},t}();var y;y=function(){function e(e,t,n){this.name=e,this.type=t,this.unit=n,this.scopes=[],this.values={},this.dependents=[],this["default"]=void 0
}return e.prototype.addScope=function(e,t){return this.values[e]=t,0===e||"0"===e?this["default"]=t:this.scopes.push(e)},e}(),window.fashion.$actualizer.generateRuntimeData=function(t,n,i,r){var o,a;return a=e.$actualizer.actualizeVariables(t,n,i,r),o=new b(t,n,a),i&&(o.individual=i),o},window.fashion.$actualizer.actualizeVariables=function(t,n,i,r){var o,a,s,u,l,d,c,p,f,h;f={},h=t.variables;for(c in h){u=h[c],l=d=-1;for(a in u)p=u[a],p.type&&(l=p.type),p.unit&&(d=p.unit);s=new y(c,l,d);for(a in u)p=u[a],s.addScope(a,p.value);o=t.bindings.variables[c],s.dependents=e.$actualizer.mapBindings(o,n,i,r),f[c]=s}return f},window.fashion.$actualizer.removeUnnecessaryModuleData=function(e){var t,n,i,r;i=e.modules.blocks,r=[];for(n in i)t=i[n],t.runtimeCapabilities&&r.push(t.runtimeObject?e.modules.blocks[n]=t.runtimeObject:void 0);return r},window.fashion.$actualizer.createCSS=function(t,n){var i,r,o,a,s,u,l,d,c,p,f,h;a=e.$actualizer.evaluationFunction(t),i="";for(s in n){for(l=n[s],r=[],h=l.properties,p=0,f=h.length;f>p;p++)u=h[p],(l.mode&e.$runtimeMode.globalDynamic)>2||(c=u.value,o=a(l.mode===e.$runtimeMode["static"]?"object"==typeof c&&c.value?c.value:c:c),r.push(e.$actualizer.cssPropertyTemplate(u.name,o)));d=a(l.name),i+=e.$actualizer.cssSelectorTemplate(d,r)}return i},window.fashion.$actualizer.cssPrefixes=["","-webkit-","-moz-","-ms-"],window.fashion.$actualizer.separateTransitions=function(t){var n,i,r,o,a,u,l,d,c,p,f,h,m,w,v,g,b;n=e.$actualizer.evaluationFunction(null,t),u=window.fashion.$actualizer.cssPrefixes,v=t.selectors,b=[];for(i in v){for(c=v[i],h=[],g=c.properties,m=0,w=g.length;w>m;m++)l=g[m],l.value.transition&&(d=l.value.transition,d.property=l.name,h.push(d),d.mode=d.easing.mode|d.duration.mode|d.delay.mode);o=e.$runtimeMode,b.push(function(){var t,i,d,m;for(d=[o["static"],o.dynamic,o.individual,o.live],m=[],t=0,i=d.length;i>t;t++)r=d[t],f=e.$actualizer.transitionStrings(n,h,r),0!==f.length&&(p=f.join(","),l=new s("transition",p,r),m.push(function(){var e,t,n;for(n=[],e=0,t=u.length;t>e;e++)a=u[e],n.push(c.addProperty(l.copyWithName(a+"transition")));return n}()));return m}())}return b},window.fashion.$actualizer.transitionStrings=function(t,n,i){var r,o,a,s,u,l,d;for(d=[],u=0,l=n.length;l>u;u++)s=n[u],s.mode===i&&(o=s.duration.script?t(s.duration):s.duration,a=s.easing.script?t(s.easing):s.easing,r=s.delay.script?t(s.delay):s.delay,d.push(e.$actualizer.cssTransitionTemplate(s.property,o,a,r)));return d},window.fashion.$actualizer.evaluationFunction=function(t,n){return function(i){return window.fashion.$shared.evaluate.call(window.fashion.$shared,i,t?t.variables:n.variables,e.$globals,e.$functions,t?t.runtime:{})}},window.fashion.$actualizer.cssPropertyTemplate=function(e,t){return""+e+": "+t+";"},window.fashion.$actualizer.cssSelectorTemplate=function(e,t){return""+e+" {"+t.join("")+"}\n"},window.fashion.$actualizer.cssTransitionTemplate=function(e,t,n,i){return""+e+" "+(t||"1s")+" "+(n||"")+(i?" "+i:"")};var $,g=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};window.fashion.$runtimeCapability={variables:"variables",scopedVariables:"scopedVariables",individualProps:"individualized",liveProps:"liveProperties",globals:"globals"},$=function(){function e(){}return e.prototype.constuctor=function(){var e;return this.capabilities=function(){var t,n,i,r;for(i=window.fashion.runtimeModules,r=[],t=0,n=i.length;n>t;t++)e=i[t],r.push(e);return r}()},e.prototype.add=function(e){var t;return this.capabilities||(this.capabilities=function(){var e,n,i,r;for(i=window.fashion.runtimeModules,r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(t);return r}()),g.call(this.capabilities,e)>=0?void 0:this.capabilities.push(e)},e.prototype.addDependencies=function(e){var t,n,i,r;for(r=[],n=0,i=e.length;i>n;n++)t=e[n],r.push(this.add(t));return r},e.prototype.has=function(e){return this.capabilities?g.call(this.capabilities,e)>=0:!1},e}(),window.fashion.$actualizer.determineRuntimeCapabilities=function(t,n){var i,r,o,a,s;if(i=new $,"{}"!==JSON.stringify(t.variables))for(i.add(e.$runtimeCapability.variables),s=t.variables,o=0,a=s.length;a>o;o++)r=s[o],r.scopes.length>0&&i.add(e.$runtimeCapability.scopedVariables);return e.$actualizer.hasPropertyMode(n,e.$runtimeMode.individual)&&i.add(e.$runtimeCapability.individualProps),e.$actualizer.hasPropertyMode(n,e.$runtimeMode.live)&&i.add(e.$runtimeCapability.liveProps),"{}"!==JSON.stringify(t.modules.globals)&&i.add(e.$runtimeCapability.globals),e.$actualizer.addModuleCapabilities(i,t),i},window.fashion.$actualizer.hasPropertyMode=function(e,t){var n,i;for(n in e)if(i=e[n],i.mode===t)return!0;return!1},window.fashion.$actualizer.addRuntimeFunctions=function(t,n,i){var r,o,a,s,u,l,d,c;if(i.capabilities)for(r=0;r<i.capabilities.length;)if(u=i.capabilities[r++],void 0!==u){if(s=e.$runtimeModules[u],!s)return console.log("[FASHION] Could not find module "+u);if(i.addDependencies(s.dependencies),t.addRuntimeModule(s),s.initializers.length>0)for(c=s.initializers,l=0,d=c.length;d>l;l++)a=c[l],o="window."+e.runtimeObject+".runtime."+a+".bind(FASHION.runtime)",n.addScript("FSREADY("+o+");")}},window.fashion.$actualizer.addModuleCapabilities=function(e,t){var n,i,r,o,a,s,u;r=t.modules.blocks;for(i in r)n=r[i],n.runtimeCapabilities&&e.addDependencies(n.runtimeCapabilities);o=t.modules.properties;for(i in o)n=o[i],n.runtimeCapabilities&&e.addDependencies(n.runtimeCapabilities);a=t.modules.functions;for(i in a)n=a[i],n.runtimeCapabilities&&e.addDependencies(n.runtimeCapabilities);s=t.modules.globals,u=[];for(i in s)n=s[i],n.runtimeCapabilities&&u.push(e.addDependencies(n.runtimeCapabilities));return u};var g=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};window.fashion.$actualizer.mapBindings=function(t,n,i,r){var o,a,s,u,l,d,c,p,f,h,m,w,v,b,y;if(t){s=[],o=e.$actualizer.createBindingTree(t);for(c in o)if(p=o[c],"$"===c[0])s.push(c);else{if(c=parseInt(c),!r[c])continue;for(v=r[c],f=0,m=v.length;m>f;f++)if(d=v[f],"number"==typeof d)l=n[d],l&&l.mode!==e.$runtimeMode["static"]&&s.push(d);else{if(l=i[parseInt(d.substr(1))],!l){console.log("[FASHION] Selector at "+d+" does not exist");continue}if(p===!0)s.push(d);else{for(a=!1,b=l.properties,h=0,w=b.length;w>h;h++)u=b[h],y=u.id,g.call(p,y)>=0&&(a=!0);a&&s.push(d)}}}return s}},window.fashion.$actualizer.createBindingTree=function(e){var t,n,i,r;for(n={},i=0,r=e.length;r>i;i++)t=e[i],t instanceof Array&&2===t.length?(n[t[0]]||(n[t[0]]=[]),n[t[0]].push(t[1])):n[t]=!0;return n},window.fashion.$actualizer.addBindings=function(t,n,i,r){return e.$actualizer.bindGlobals(t,n.bindings.globals,i,r)},window.fashion.$actualizer.bindGlobals=function(t,n,i,r){var o,a,s,u,l;u=t.modules.globals,l=[];for(s in u)a=u[s],o=n[s],l.push(a.dependents=e.$actualizer.mapBindings(o,i,t.individual,r));return l},window.fashion.$actualizer.hideIndividualizedSelectors=function(t,n,i){var r,o,u,l,d,c,p,f,h,m;for(l=[],c=0,f=i.length;f>c;c++)d=i[c],r=new a(d.name,e.$runtimeMode["static"]),r.addProperty(new s("visibility","hidden")),l.push(t.length),t.push(r);for(u="FSREADY(function(){\nss = document.getElementById(FASHION.config.cssId);\nrm = function(id){if(ss&&ss.sheet)ss.sheet.deleteRule(id);};",m=l.reverse(),p=0,h=m.length;h>p;p++)o=m[p],u+="rm("+o+");";return n.push(u+"})")},window.fashion.$actualizer.minifier={runtimeData:function(t){var n,i,r;return[function(){var r,o;r=t.selectors,o=[];for(n in r)i=r[n],o.push(e.$actualizer.minifier.selector(n,i));return o}(),function(){var i,o;i=t.variables,o=[];for(n in i)r=i[n],o.push(e.$actualizer.minifier.variable(r));return o}(),function(){var r,o;r=t.individual,o=[];for(n in r)i=r[n],o.push(e.$actualizer.minifier.selector(n,i));return o}()]},selector:function(t,n){var i,r,o,s,u,d;if(n&&n instanceof a){for(i=n.name instanceof l?e.$actualizer.minifier.expression(n.name):n.name,r=[],d=n.properties,s=0,u=d.length;u>s;s++)o=d[s],r.push(e.$actualizer.minifier.property(o));return["s",parseInt(t),i,n.mode,r]}},property:function(t){var n,i,r,o,a;if(t&&t instanceof s){if(t.value instanceof Array)for(i=[],a=t.value,r=0,o=a.length;o>r;r++)n=a[r],i.push(n instanceof l?e.$actualizer.minifier.expression(n):n);else i=t.value instanceof l?e.$actualizer.minifier.expression(t.value):t.value;return["p",t.name,t.mode,i]}},expression:function(e){return e&&e instanceof l?["e",e.mode,e.type,e.unit,e.setter,e.script]:void 0},variable:function(t){var n,i,r,o,a,s,u;if(t&&t instanceof y){for(n=t["default"]instanceof l?e.$actualizer.minifier.expression(t["default"]):t["default"],o=[],u=t.values,a=0,s=u.length;s>a;a++)r=u[a],o.push(r instanceof l?e.$actualizer.minifier.expression(r):r);return i=["v",t.name,t.type,t.unit,n,t.dependents],t.scopes&&i.push.apply(i,[t.scopes,o]),i}}},window.fashion.$actualizer.minifier.expandRuntimeData=function(e,t){var n,i,r,o,a,s,u,l,d,c,p,f,h,m,w,v;for(i={s:function(e){return{id:e[1],name:n(e[2]),mode:e[3],properties:n(e[4])}},p:function(e){return{name:e[1],mode:e[2],value:n(e[3])}},e:function(e){return{mode:e[1],type:e[2],unit:e[3],setter:e[4],evaluate:Function("v","g","f","t","e",e[5])}},v:function(e){return{name:e[1],type:e[2],unit:e[3],"default":n(e[4]),dependents:e[5],scopes:e[6],values:n(e[7])}}},n=function(e){var t,n,r,o;if(!(e instanceof Array))return e;if(0===e.length)return 0;if("string"==typeof e[0]&&i[e[0]])return i[e[0]](e);for(n=[],r=0,o=e.length;o>r;r++)t=e[r],n.push(i[t[0]]?i[t[0]](t):t);return n},h=e[0],u=0,c=h.length;c>u;u++)r=h[u],o=n(r),t.selectors[o.id]=o;for(m=e[1],l=0,p=m.length;p>l;l++)a=m[l],s=n(a),t.variables[s.name]=s;if(e[2]){for(w=e[2],v=[],d=0,f=w.length;f>d;d++)r=w[d],o=n(r),v.push(t.individual[o.id]=o);return v}};var S;S=function(){function e(e,t,n){var i,r;this.name=e,this.dependencies=t,this.functions=n,this.initializers=[];for(r in n)i=n[r],"$"===r[0]&&this.initializers.push(r)}return e}(),window.fashion.$runtimeModules={},window.fashion.addRuntimeModule=function(e,t,n){return window.fashion.$runtimeModules[e]=new S(e,t,n)},e.addRuntimeModule("types",[],{determineType:window.fashion.$shared.determineType,getUnit:window.fashion.$shared.getUnit,timeInMs:window.fashion.$shared.timeInMs}),e.addRuntimeModule("evaluation",[],{evaluate_Shared:window.fashion.$shared.evaluate,evaluate:function(e,t,n){var i,r,o,a;if(null!=n){o=n,a=FASHION.variables;for(i in a)r=a[i],null==o[i]&&(o[i]=r)}else o=FASHION.variables;return this.evaluate_Shared(e,o,FASHION.modules.globals,FASHION.modules.functions,FASHION.runtime,t)}}),e.addRuntimeModule("colors",[],window.fashion.color),e.addRuntimeModule("errors",[],{throwError:function(e){return console.log("[FASHION] Runtime error: "+e),console.log((new Error).stack)}}),e.addRuntimeModule("wait",[],{wait:function(e,t){return setTimeout(t,e)}}),e.addRuntimeModule("variables",["evaluation","selectors","types","errors"],{getVariable:window.fashion.$shared.getVariable,variableValue:function(e,t){return this.getVariable(FASHION.variables,FASHION.modules.globals,FASHION.modules.functions,FASHION.runtime,e,t).value},setVariable:function(e,t,n){return void 0===n?this.setTopLevelVariable(e,t):console.log("Scoped variable setting coming soon")},setTopLevelVariable:function(e,t){var n;return(n=FASHION.variables[e])?(n["default"]=t,this.updateDependencies(e)):this.throwError("Variable '$"+e+"' does not exist")},updateDependencies:function(e){var t,n,i,r,o,a;for(n=FASHION.variables[e],o=n.dependents,a=[],i=0,r=o.length;r>i;i++)t=o[i],a.push("string"==typeof t&&"$"===t[0]?this.updateDependencies(t.substr(1)):this.regenerateSelector(t));return a},$initWatchers:function(){var e,t,n,i,r,o;window[FASHION.config.variableObject]=t={},r=FASHION.variables,o=[];for(n in r)i=r[n],e=function(){return function(e){return{get:function(){return FASHION.runtime.variableValue(e)},set:function(t){return FASHION.runtime.setVariable(e,t)}}}}(this)(n),Object.defineProperty(t,n,e),o.push(Object.defineProperty(t,"$"+n,e));return o}}),e.addRuntimeModule("selectors",["evaluation","errors"],{runtimeModes:window.fashion.$runtimeMode,regenerateSelector:function(e){var t,n,i;return"string"==typeof e&&"i"===e[0]?(n=FASHION.individual[parseInt(e.substr(1))],n||this.throwError("Could not find individual property "+e),this.updateSelectorElements?(this.evaluate(n.name)!==n.elementsSelector&&this.updateSelectorElements(n),this.regenerateIndividualSelector(n)):this.throwError("The 'individualized' module was not included.")):(n=FASHION.selectors[e])?(t=document.getElementById(""+FASHION.config.cssId),i=t.sheet,i.deleteRule(e),i.insertRule(this.CSSRuleForSelector(n),e)):this.throwError("Selector "+e+" does not exist")},CSSPropertyTemplate:window.fashion.$actualizer.cssPropertyTemplate,CSSSelectorTemplate:window.fashion.$actualizer.cssSelectorTemplate,CSSRuleForSelector:function(e,t,n){var i,r,o,a,s,u;return s=n||this.evaluate(e.name,t),i=function(){var n,i,s,l;for(s=e.properties,l=[],n=0,i=s.length;i>n;n++){if(a=s[n],o=FASHION.modules.properties[a.name]){if(r=this.evaluate.bind(this,a.value,t),!o.apply)continue;if(o.apply(t,a.value,r),o.replace)continue}u=this.evaluate(a.value,t),l.push(this.CSSPropertyTemplate(a.name,u))}return l}.call(this),this.CSSSelectorTemplate(s,i)}}),e.addRuntimeModule("individualized",["selectors","elements","stylesheet-dom"],{$initializeIndividualProperties:function(){var e,t,n,i,r;FASHION.individualSheet=this.addStylesheet(""+FASHION.config.individualCSSID).sheet,n=FASHION.individual;for(e in n)t=n[e],this.updateSelectorElements(t);i=FASHION.individual,r=[];for(e in i)t=i[e],r.push(this.regenerateIndividualSelector(t));return r},updateSelectorElements:function(e){var t,n,i,r,o,a,s,u,l;u=e.elements;for(n in u)i=u[n],-1!==i.cssid&&FASHION.individualSheet.deleteRule(i.cssid);for(o=this.evaluate(e.name),e.elementsSelector=o,e.elements={},r=this.elementsForSelector(o),l=[],a=0,s=r.length;s>a;a++)t=r[a],t.id||t.setAttribute("id",this.generateRandomId()),l.push(e.elements[t.id]={element:t,cssid:-1});return l},generateRandomId:function(e){var t,n;return null==e&&(e=20),t=function(){var t,i;for(i=[],n=t=0;e>=0?e>=t:t>=e;n=e>=0?++t:--t)i.push(Math.round(36*Math.random()).toString(36));return i}().join(""),FASHION.config.idPrefix+t},elementsForSelector:function(e){return Array.prototype.slice.call(document.querySelectorAll(e))},regenerateIndividualSelector:function(e){var t,n,i,r,o;r=e.elements,o=[];for(n in r)i=r[n],-1!==i.cssid?FASHION.individualSheet.deleteRule(i.cssid):i.cssid=FASHION.individualSheet.rules.length,t=this.CSSRuleForSelector(e,i.element,"#"+n),o.push(FASHION.individualSheet.insertRule(t,i.cssid));return o}}),e.addRuntimeModule("globals",["selectors"],{$startWatchers:function(){var e,t,n,i,r;n=function(e){return function(t){return e.updateGlobal.bind(e,t)}}(this),i=FASHION.modules.globals,r=[];for(t in i)e=i[t],null!=e.watch&&(e.watch(n(e)),r.push(this.updateGlobal(e)));return r},updateGlobal:function(e){var t,n,i,r,o;for(r=e.dependents,o=[],n=0,i=r.length;i>n;n++)t=r[n],o.push("string"==typeof t&&"$"===t[0]?this.updateDependencies(t.substr(1)):this.regenerateSelector(t));return o}}),e.addRuntimeModule("elements",[],{elementFunction:function(e){return function(t){return function(n,i){var r;return null==n&&null!=i?e:0===n.indexOf("parent")?"parent"===n?e.parentNode:(r=n.replace("parent.",""),t.elementFunction(e.parentNode)(r)):"width"===n?e.clientWidth:"height"===n?e.clientHeight:e.getAttribute(n)}}(this)}}),e.addRuntimeModule("stylesheet-dom",[],{addStylesheet:function(e,t){var n,i;return i=document.createElement("style"),i.setAttribute("type","text/css"),e&&i.setAttribute("id",e),t&&i.setAttribute("class",t),n=document.head||document.getElementsByTagName("head")[0],n.appendChild(i),i},removeStylesheet:function(e){return e&&e.parentNode?e.parentNode.removeChild(e):void 0},getStylesheet:function(e){var t;return(t=document.getElementById(e))?t:this.addStylesheet(e)}}),e.addRuntimeModule("sheets",["stylesheet-dom"],{moveSheetToTop:function(e){var t;return t=document.head||document.getElementsByTagName("head")[0],t.lastChild!==e?(this.removeStylesheet(e),t.appendChild(e)):void 0},setRuleOnSheet:function(e,t,n,i,r){var o,a,s,u;null==r&&(r=!0),e instanceof HTMLStyleElement&&(e=e.sheet),e.rules||(e.rules=e.cssRules),u=e.rules;for(o in u)if(a=u[o],a.selectorText===t)return a.style.setProperty(n,i),void(r&&(s=a.cssText,e.removeRule(o),e.insertRule(s,e.rules.length)));return e.insertRule(""+t+" {"+n+": "+i+";}",e.rules.length)}}),window.fashion.$functions={random:new c({output:e.$type.Number,evaluate:function(){return Math.random()}}),round:new c({output:e.$type.Number,unitFrom:0,evaluate:function(e){return Math.round(e.value)}}),min:new c({output:e.$type.Number,unitFrom:0,evaluate:function(){var e,t,n,i;for(t=9007199254740992,n=0,i=arguments.length;i>n;n++)e=arguments[n],e.value<t&&(t=e.value);return t}}),max:new c({output:e.$type.Number,unitFrom:0,evaluate:function(){var e,t,n,i;for(t=-9007199254740992,n=0,i=arguments.length;i>n;n++)e=arguments[n],e.value>t&&(t=e.value);return t}}),toggle:new c({output:e.$type.Number,unitFrom:0,evaluate:function(e,t,n){return e.value===t.value?n.value:t.value}})},e.$extend(window.fashion.$functions,{"@":new c({output:e.$type.Number,unit:"",dynamic:!0,evaluate:function(e,t,n){var i,r;return n||(n=document),i=this.querySelector(e.value),r=this.getComputedStyle(i),r[t.value]}})}),e.$extend(window.fashion.$functions,{rgb:new c({output:e.$type.Color,evaluate:function(e,t,n){return"rgb("+parseInt(e.value)+","+parseInt(t.value)+","+parseInt(n.value)+")"}}),rgba:new c({output:e.$type.Color,evaluate:function(e,t,n,i){return"rgba("+parseInt(e.value)+","+parseInt(t.value)+","+parseInt(n.value)+","+i.value+")"}}),hsl:new c({output:e.$type.Color,evaluate:function(e,t,n){return"hsl("+parseInt(e.value)+","+parseInt(t.value)+"%,"+parseInt(n.value)+"%)"}}),hsla:new c({output:e.$type.Color,evaluate:function(e,t,n,i){return"hsla("+parseInt(e.value)+","+parseInt(t.value)+"%,"+parseInt(n.value)+"%,"+i.value+")"}}),hsb:new c({output:e.$type.Color,capabilities:["colors"],evaluate:function(e,t,n){var i,r,o;return console.log(this),o=this.hsbTOrgb(e.value,t.value,n.value),r=o.r,i=o.g,n=o.b,"rgb("+parseInt(r)+","+parseInt(i)+","+parseInt(n)+")"}}),hsba:new c({output:e.$type.Color,capabilities:["colors"],evaluate:function(e,t,n,i){var r,o,a;return a=this.hsbTOrgb(e.value,t.value,n.value),o=a.r,r=a.g,n=a.b,"rgba("+parseInt(o)+","+parseInt(r)+","+parseInt(n)+","+i.value+")"}}),changeAlpha:new c({output:window.fashion.$type.Color,capabilities:["colors"],evaluate:function(e,t){var n;return n=this.cssTOjs(e.value,this),"rgba("+n.r+","+n.g+","+n.b+","+t.value+")"}}),brighten:new c({output:window.fashion.$type.Color,capabilities:["colors"],evaluate:function(e,t){var n,i,r;return r=t.value,n=1+(r>1?r/100:r),i=this.cssTOjs(e.value,this),i.r=parseInt(Math.max(i.r*n,0)),i.g=parseInt(Math.max(i.g*n,0)),i.b=parseInt(Math.max(i.b*n,0)),"rgba("+i.r+","+i.g+","+i.b+","+i.a+")"}}),darken:new c({output:window.fashion.$type.Color,capabilities:["colors"],evaluate:function(e,t){var n,i,r;return r=t.value,n=1-(r>1?r/100:r),i=this.cssTOjs(e.value,this),i.r=parseInt(Math.max(i.r*n,0)),i.g=parseInt(Math.max(i.g*n,0)),i.b=parseInt(Math.max(i.b*n,0)),"rgba("+i.r+","+i.g+","+i.b+","+i.a+")"}})}),e.$extend(window.fashion.$functions,new(function(){function t(){var t,n,i,r,o;for(i=["matrix","matrix3d","translate","translate3d","translateX","translateY","translateZ","scale","scale3d","scaleX","scaleY","scaleZ","rotate","rotate3d","rotateX","rotateY","rotateZ","skew","skewX","skewY","perspective"],t=function(e){var t;return t='var a = arguments;\nvar s = "'+e+'(";\nfor(var i = 0; i < a.length; i++){\n	s += a[i].value;\n	if(i<a.length-1)s += ",";\n}\nreturn s + ")";',new Function(t)},r=0,o=i.length;o>r;r++)n=i[r],this[n]=new c({mode:e.$runtimeMode["static"],output:e.$type.String,evaluate:t(n)})}return t}())),window.fashion.$properties={"text-style":new h({replace:!0,compile:function(e){var t,n,i,r,o;if(n=[],t=function(e){return function(t){if("string"==typeof t){if("'"===t[0]||'"'===t[0])return n.push(t);switch(t){case"serif":n.push("serif");break;case"sans-serif":n.push("sans-serif");break;case"monospace":n.push("monospace");break;case"italic":e.setProperty("font-style","italic");break;case"oblique":e.setProperty("font-style","oblique");break;case"bold":e.setProperty("font-weight","bolder");break;case"light":e.setProperty("font-weight","lighter");break;case"underline":e.setProperty("text-decoration","underline");break;case"overline":e.setProperty("text-decoration","overline");break;case"line-through":e.setProperty("text-decoration","line-through");break;case"strikethrough":e.setProperty("text-decoration","line-through")}return-1!==t.indexOf("pt")||-1!==t.indexOf("px")?e.setProperty("font-size",t):void 0}}}(this),e instanceof Array)for(r=0,o=e.length;o>r;r++)i=e[r],t(i);else t(e);return this.setProperty("font-family",n.join(", "))}})},e.$extend(window.fashion.$properties,{pin:new h({replace:!0,compile:function(e){var t,n,i,r,o;return"object"==typeof e&&(e.length>2||e[0]instanceof Array)&&this.throwError("Valid arguments: '{x}px {y}px' or '{both}px'"),this.setProperty("position","absolute"),n=r=o=t=void 0,i=function(e){switch(e){case"left":return n="0px";case"right":return r="0px";case"top":return o="0px";case"bottom":return t="0px";case"center":return n="@self.parent.width / 2 - @self.width / 2",o="@self.parent.height / 2 - @self.height / 2";default:return this.throwError("Invalid position: "+e)}},"object"==typeof e?(i(e[0]),2===e.length&&i(e[1])):"string"==typeof e&&i(e),n?this.setProperty("left",this.parseValue(n)):this.setProperty("right",this.parseValue(r)),o?this.setProperty("top",this.parseValue(o)):this.setProperty("bottom",this.parseValue(t))}})}),e.$extend(window.fashion.$properties,new(function(){function t(){var t,n,i,r,o;for(n=["click","dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","mouseout","mouseover","drag","dragdrop","dragend","drop","dragenter","dragexit","draggesture","dragleave","dragover","dragstart","blur","change","focus","focusin","focusout","submit","reset"],t=function(e){var t;return t="if(element.getAttribute('data-hastrigger-"+e+"'))return;\nelement.addEventListener('"+e+"', evaluate, true);\nelement.setAttribute('data-hastrigger-"+e+"', 'true');",new Function("element","value","evaluate",t)},r=0,o=n.length;o>r;r++)i=n[r],this["on-"+i]=new h({replace:!0,mode:e.$runtimeMode.individual,apply:t(i)})}return t}())),window.fashion.$blocks={},window.fashion.$blocks.transition=new d({capabilities:["transitionBlock"],compile:function(e,t){var n,i,r,o,a,s,u,l,d,c,p;for(l=e[0],d=/(\s*([0-9\-\.\s\%]+?\%|start|begin|finish)\s?\{|\$([\w\-]+)\:[\s]*(.*?)[;\n]|\}|\{)/g,s={},p={},o=u=0,r=n="",i=1e3;--i>0&&(c=d.exec(t));)n+=t.substring(u,c.index),u=c.index,c[2]&&0===o&&(r=c[2],o++,n="",u=c[0].length+c.index),c[3]&&c[4]&&0===o&&(p.$vars||(p.$vars=[]),p.$vars.push(c[3]),this.addVariable(c[3],c[4])),"{"===c[0]?o++:"}"===c[0]&&(o--,0===o&&(s[r]=n,n="",r=""));for(a in s)t=s[a],p[a]=this.parse(t).selectors;return this.runtimeObject.transitions[l]=p},runtimeObject:{transitions:{}}}),e.addRuntimeModule("transitionBlock",["wait","selectors","types","sheets"],{transitionTiming:{start:10,end:5,settle:1},triggerTransition:function(e,t,n){var i,r,o,a,s,u,l,d,c;if(t=this.timeInMs(t),d=FASHION.modules.blocks.transition.transitions[e],null==d)return this.throwError("Transition '"+e+"' does not exist");c=this.addStylesheet(void 0,"FASHION-transition::temporary-"+e),s=this.getStylesheet("FASHION-transition::properties-"+e),this.moveSheetToTop(s);for(a in d)u=d[a],"$"!==a[0]&&("start"===a||"begin"===a?l=0:"finish"===a?l=t+this.transitionTiming.start:(o=parseFloat(a.split("-")[0])/100*t,l=o+this.transitionTiming.start),i=-1!==a.indexOf("-")?this.transitionKeyframeRange(u,t,c.sheet,n):this.transitionKeyframeSingle(u,t,c.sheet,n),l>0?this.wait(l,i.bind(this)):i.bind(this)());return r=t+this.transitionTiming.start+this.transitionTiming.end,this.wait(r,function(e){return function(){return e.removeStylesheet(c)}}(this))},transitionKeyframeSingle:function(e,t,n,i){return function(){var r,o,a,s,u,l,d,c,p,f,h;d=this.transitionTiming.settle,o=this.getStylesheet("FASHION-transition::properties-"+name);for(r in e){for(l=e[r],a=l.properties,c=[],f=0,h=a.length;h>f;f++)s=a[f],"object"==typeof s.value&&s.value.transition&&c.push(s);p=this.generateCSSTransitions.call(this,c,t,i),u=this.evaluate(l.name,0,i),n.insertRule(""+u+" {"+p+"}",n.rules.length),this.wait(d,function(e){return function(t,n){return function(){var r,a,u,l;for(l=[],a=0,u=n.length;u>a;a++)s=n[a],r=e.evaluate(s.value,0,i),l.push(e.setRuleOnSheet(o,t,s.name,r));return l}}}(this)(u,a))}}},transitionKeyframeStatic:function(){return function(){return console.log("[FASHION] The transition block does not support ranged keyframes yet")}},generateCSSTransitions:function(e,t,n){var i,r,o,a,s,u,l;for(i="transition: ",u=0,l=e.length;l>u;u++)a=e[u],a.value.transition&&(s=a.value.transition,r=parseFloat(this.evaluate(s.duration,0,n))/100*t,o=null!=r?""+r+"ms":s.duration,i+=""+a.name+" "+o+" "+(s.easing||"")+" "+(s.delay||"")+",");return i=i.substr(0,i.length-1)+";",i=[i,"-webkit-"+i,"-moz-"+i,"-ms-"+i].join("")}}),window.fashion.$functions.trigger=new c({output:e.$type.None,unit:"",mode:e.$runtimeMode.individual,evaluate:function(e,t,n){var i,r,o;for(i in n)o=n[i],n[i]=o.value;return r=FASHION.runtime.triggerTransition,r.call(this,e.value,t,n)}}),window.fashion.$globals={width:new p({type:e.$type.Number,unit:"px",get:function(){return window.innerWidth},watch:function(e){return window.addEventListener("resize",e,!1)}}),height:new p({type:e.$type.Number,unit:"px",get:function(){return window.innerHeight},watch:function(e){return window.addEventListener("resize",e,!1)}}),scrolly:new p({type:e.$type.Number,unit:"px",get:function(){return window.scrollY},watch:function(e){return window.addEventListener("onscroll",e)}}),scrollx:new p({type:e.$type.Number,unit:"px",get:function(){return window.scrollX},watch:function(e){return window.addEventListener("onscroll",e)}}),mousey:new p({type:e.$type.Number,unit:"px",get:function(){return window.mouseY||0},watch:function(e){return window.addEventListener("mousemove",function(t){return window.mouseY=t.pageY,e()})}}),mousex:new p({type:e.$type.Number,unit:"px",get:function(){return window.mouseX||0},watch:function(e){return window.addEventListener("mousemove",function(t){return window.mouseX=t.pageX,e()})}}),pixelratio:new p({type:e.$type.Number,get:function(){return window.devicePixelRatio},watch:function(e){var t;return t=window.devicePixelRatio,setInterval(function(){return window.devicePixelRatio!==t&&e(),t=window.devicePixelRatio},1e3)}})}}();
