/*
FASHION: Style + Smarts ------------------------------------------------------
Copyright (c) 2014 Keaton Brandt
Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:
The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
------------------------------------------------------------------------------
 */
!function(){var e,t;e=window.fashion={version:"0.3.1",url:"http://writefashion.org",author:"Keaton Brandt",mimeType:"text/x-fashion",cssId:"FASHION-stylesheet",minifiedObject:"FSMIN",runtimeObject:"FASHION",runtimeModules:[],readyEvent:"fashion-ready"},window.fashion.runtimeConfig={variableObject:"style",idPrefix:"FS-",individualCSSID:"FASHION-individual",cssId:window.fashion.cssId},t=function(e,t){return setTimeout(t,e)},window.fashion.addProperty=function(e,t,n){return null==n&&(n=!1),t instanceof w||(t=new w(t)),!n&&window.fashion.$properties[e]?new Error("There is already a property named "+e):window.fashion.$properties[e]=t},window.fashion.addProperties=function(e,t){var n,r,i,o,a;for(null==t&&(t=!1),a=[],r=i=0,o=e.length;o>i;r=++i)n=e[r],a.push(window.fashion.addProperty(n,r,t));return a},window.fashion.addFunction=function(e,t,n){return null==n&&(n=!1),t instanceof f||(t=new f(t)),!n&&window.fashion.$functions[e]?new Error("There is already a function named "+e):window.fashion.$functions[e]=t},window.fashion.addFunctions=function(e,t){var n,r,i,o,a;for(null==t&&(t=!1),a=[],r=i=0,o=e.length;o>i;r=++i)n=e[r],a.push(window.fashion.addFunction(n,r,t));return a},window.fashion.addGlobal=function(e,t,n){return null==n&&(n=!1),t instanceof h||(t=new h(t)),!n&&window.fashion.$globals[e]?new Error("There is already a global named "+e):window.fashion.$globals[e]=t},window.fashion.addGlobals=function(e,t){var n,r,i,o,a;for(null==t&&(t=!1),a=[],r=i=0,o=e.length;o>i;r=++i)n=e[r],a.push(window.fashion.addGlobal(n,r,t));return a},window.fashion.addBlock=function(e,t,n){return null==n&&(n=!1),t instanceof p||(t=new p(t)),!n&&window.fashion.$blocks[e]?new Error("There is already a block named "+e):window.fashion.$blocks[e]=t},window.fashion.addBlocks=function(e,t){var n,r,i,o,a;for(null==t&&(t=!1),a=[],r=i=0,o=e.length;o>i;r=++i)n=e[r],a.push(window.fashion.addBlock(n,r,t));return a};var n;window.fashion.live={loadedEvent:"fashion-loaded"},n=document.currentScript||document.scripts[document.scripts.length-1],document.addEventListener("readystatechange",function(){return"complete"===document.readyState?window.fashion.$loader.loadStyles(function(t){var n,r,i,o,a,s;return a=(new Date).getTime(),o=window.fashion.$parser.parse(t),o=window.fashion.$processor.process(o),s=window.fashion.$actualizer.actualize(o),n=s.css,i=s.js,console.log("[FASHION] Compile finished in "+((new Date).getTime()-a)+"ms"),a=(new Date).getTime(),e.$dom.addStylesheet(n),e.$dom.addScript(i),console.log("[FASHION] Page initialize finished in "+((new Date).getTime()-a)+"ms"),r=new Event(window.fashion.live.loadedEvent),r.variableObject=window[window.fashion.variableObject],document.dispatchEvent(r)}):void 0});var r=[].slice;window.fashion.$extend=function(e,t){var n,r,i;i=[];for(n in t)r=t[n],i.push(e[n]?void 0:e[n]=r);return i},window.fashion.$combine=function(){var e,t,n,i,o;for(t=1<=arguments.length?r.call(arguments,0):[],n={},i=0,o=t.length;o>i;i++)e=t[i],window.fashion.$extend(n,e);return n},window.fashion.$dom={addElementToHead:function(e){var t;return t=document.head||document.getElementsByTagName("head")[0],t.appendChild(e)},addStylesheet:function(t,n){var r,i,o,a;null==n&&(n=window.fashion.cssId),i=document.createElement("style"),i.setAttribute("type","text/css"),i.setAttribute("id",""+n),e.$dom.addElementToHead(i),o=t.split("\n"),a=[];for(n in o)r=o[n],r.length>3&&a.push(i.sheet.insertRule(r,n));return a},addScript:function(t){var n;return n=document.createElement("script"),n.setAttribute("type","text/javascript"),n.text=t,e.$dom.addElementToHead(n)},incrementSheetIndex:function(e){var t;return t=parseInt(e.getAttribute("data-count")),e.setAttribute("data-count",t+1),t},getSheetIndex:function(e){return parseInt(e.getAttribute("data-index"))}},window.fashion.$stringify=function(e){if(e instanceof Array)return window.fashion.$stringifyArray(e);switch(typeof e){case"string":return JSON.stringify(e);case"object":return window.fashion.$stringifyObject(e);case"number":return e;case"undefined":return"undefined";default:return e.toString()}},window.fashion.$stringifyObject=function(e){var t,n,r;t=[];for(n in e)r=e[n],e.hasOwnProperty(n)&&(n=n.replace("'","'"),t.push("'"+n+"': "+window.fashion.$stringify(r)));return"{"+t.join(",")+"}"},window.fashion.$stringifyArray=function(e){var t,n,r,i;for(t=[],r=0,i=e.length;i>r;r++)n=e[r],t.push(window.fashion.$stringify(n));return"["+t.join(",")+"]"};var i,o=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};i=function(){function e(e){var t,n,r;if(this.variables={},this.selectors=[],this.blocks=[],this.scripts=[],this.requires=[],this.dependencies={blocks:{},globals:{},functions:{},properties:{}},e){r=e.variables;for(t in r)n=r[t],this.variables[t]=n}}return e.prototype.addVariable=function(e){var t,n;if(n=e.name,delete e.name,t=e.scope||0,delete e.scope,!n)throw new Error("Variables must be named");return this.variables[n]||(this.variables[n]={}),this.variables[n][t]=e},e.prototype.addSelector=function(e){return e.index=this.selectors.length,this.selectors.push(e)},e.prototype.addRequirements=function(e){var t,n,r,i;if(e){for(i=[],n=0,r=e.length;r>n;n++)t=e[n],null!=t&&o.call(this.requires,t)<0&&i.push(this.requires.push(t));return i}},e.prototype.addScript=function(e){return this.scripts.push(e)},e.prototype.addBlock=function(e){return this.blocks.push(e)},e.prototype.addBlockDependency=function(e,t){return t?(this.dependencies.blocks[e]=t,this.addRequirements(t.requires)):void 0},e.prototype.addGlobalDependency=function(e,t){return t?(this.dependencies.globals[e]=t,this.addRequirements(t.requires)):void 0},e.prototype.addFunctionDependency=function(e,t){return t?(this.dependencies.functions[e]=t,this.addRequirements(t.requires)):void 0},e.prototype.addPropertyDependency=function(e,t){return t?(this.dependencies.properties[e]=t,this.addRequirements(t.requires)):void 0},e.prototype.forEachVariable=function(e){var t,n,r,i,o;o=this.variables;for(t in o){r=o[t];for(n in r)if(i=r[n],e.call(i,i,n)===!1)return}},e.prototype.forEachMatchingSelector=function(e,t){var n,r,i,o;for(o=this.selectors,r=0,i=o.length;i>r;r++)if(n=o[r],n.name===e&&t.call(this,n)===!1)return},e}(),window.fashion.$class||(window.fashion.$class={}),window.fashion.$class.ParseTree=i;var a;a=function(){function t(t,n,r){null==r&&(r=0),"$"===t[0]&&(t=t.substr(1)),this.name=t,this.mode=e.$runtimeMode.dynamic,this.raw=this.value=n,this.scope=r,this.topLevel=0===r}return t.prototype.annotateWithType=function(e,t,n){return this.type=e,this.unit=t,n?this.value=n:void 0},t}(),window.fashion.$class.Variable=a;var s;s=function(){function t(t,n){this.rawName=this.name=t,this.properties=[],this.index=-1,this.mode=n?n:t instanceof d?e.$runtimeMode.dynamic:e.$runtimeMode["static"]}return t.prototype.addToBody=function(e){return this.body||(this.body=""),this.body+=e},t.prototype.addProperty=function(e){return this.body=void 0,e.id||(e.id=this.properties.length),this.properties.push(e)},t.prototype.insertProperty=function(e,t){return this.body=void 0,e.id||(e.id=this.properties.length),this.properties.splice(t,0,e)},t.prototype.deleteProperty=function(e){return this.properties.splice(e,1)},t.prototype.forEachPropertyNamed=function(e,t){var n,r,i,o;for(o=this.properties,r=0,i=o.length;i>r;r++)if(n=o[r],n.name===e&&t.call(this,n)===!1)return},t}(),window.fashion.$class.Selector=s;var u,l;u=function(){function t(t,n,r,i){null==r&&(r=e.$runtimeMode["static"]),this.name=t,this.mode=r,this.important=!1,i?"object"!=typeof n?this.value={value:n,transition:i}:(this.value=n,this.value.transition=i):this.value=n}return t.prototype.copyWithName=function(e){return new t(e,this.value,this.mode)},t}(),l=function(){function e(e,t,n){this.easing=e,this.duration=t,this.delay=n}return e}(),window.fashion.$class.Property=u,window.fashion.$class.PropertyTransition=l;var d,c,o=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};d=function(){function e(e,t,n,r,i){this.script=e.toString(),this.setter=-1!==this.script.indexOf("="),this.mode=i,this.type=t,this.unit=n,this.bindings=r||new c}return e.prototype.generate=function(){var e;try{return this.evaluate=Function("v","g","f","t","e",this.script)}catch(t){return e=t,console.log("[FASHION] Could not compile script '"+this.script+"'"),console.log(e)}},e}(),c=function(){function e(e,t){switch(this.variables=[],this.globals=[],this.dom=[],e){case"variable":this.addVariableBinding(t);break;case"global":this.addGlobalBinding(t);break;case"dom":console.log("[FASHION] DOM Bindings not yet supported")}}return e.prototype.addVariableBinding=function(e){return o.call(this.variables,e)>=0?void 0:this.variables.push(e)},e.prototype.addGlobalBinding=function(e){return o.call(this.globals,e)>=0?void 0:this.globals.push(e)},e.prototype.addDOMBinding=function(){return console.log("[FASHION] DOM Bindings not yet supported")},e.prototype.extend=function(e){var t,n,r,i,a,s,u,l,d,c,p,f;if(null!=e&&null!=e.variables){for(t=function(e,t){return o.call(e,t)>=0?void 0:e.push(t)},d=e.variables,r=0,s=d.length;s>r;r++)n=d[r],t(this.variables,n);for(c=e.globals,i=0,u=c.length;u>i;i++)n=c[i],t(this.globals,n);for(p=e.dom,f=[],a=0,l=p.length;l>a;a++)n=p[a],f.push(t(this.dom,n));return f}},e}(),window.fashion.$class.Expression=d,window.fashion.$class.ExpressionBindings=c;var p,f,h,m,w,v,g={}.hasOwnProperty,y=function(e,t){function n(){this.constructor=e}for(var r in t)g.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};m=function(){function t(t){this.mode=t.mode||t.runtimeMode||e.$runtimeMode["static"],this.requires=t.requires||t.capabilities,t.watcherFunction&&(!(this.mode|e.$runtimeMode.dynamic)||this.mode|e.$runtimeMode.live?console.log("[FASHION] Static/live modules cannot have watcher functions."):this.watch=t.watcherFunction)}return t}(),v=function(t){function n(t){this.type=t.type||t.output||t.outputType||e.$type.String,this.unit=t.unit||"",this.get=t.get||t.evaluate,n.__super__.constructor.call(this,t)}return y(n,t),n}(m),h=function(t){function n(t){this.watch=t.watch,t.mode||(t.mode=e.$runtimeMode.globalDynamic),n.__super__.constructor.call(this,t)}return y(n,t),n}(v),f=function(e){function t(e){void 0!==e.unitFrom&&(this.unitFrom=e.unitFrom,delete e.unit),t.__super__.constructor.call(this,e)}return y(t,e),t}(v),p=function(e){function t(e){"function"==typeof e?this.compile=e:(this.compile=e.compileFunction||e.compile,this.runtimeObject=e.runtimeObject||e.runtime,this.requires=e.requires||e.capabilities)}return y(t,e),t}(m),w=function(t){function n(t){"function"==typeof t?this.compile=t:(this.compile=t.compileFunction||t.compile,this.apply=t.applyFunction||t.apply,this.apply&&(t.mode|=e.$runtimeMode.individual),this.replace=t.replace||!1,this.runtimeObject=t.runtimeObject||t.runtime,this.mode=t.mode||0,this.requires=t.requires||t.capabilities)}return y(n,t),n}(m),window.fashion.$class||(window.fashion.$class={}),window.fashion.$class.GlobalModule=h,window.fashion.$class.FunctionModule=f,window.fashion.$class.BlockModule=p,window.fashion.$class.PropertyModule=w,window.fashion.$type={None:0,Number:1,String:2,Color:3,Element:4,KGeneric:100,KDisplay:101,KCenter:102,KListStyle:103,KLineStyle:104,KInset:105,Unknown:255},window.fashion.$unit={Number:{"":!1," ":!1,px:"px",pt:"pt","%":"%",em:"em",ex:"ex",cm:"cm",mm:"mm","in":"in",pt:"pt",pc:"pc",ch:"ch",rem:"rem",vh:"vh",vw:"vw",vmin:"vmin",vmax:"vmax",ms:"ms",s:"s"}},window.fashion.$typeConstants={colors:["aqua","black","blue","fuchsia","gray","green","lime","maroon","navy","olive","purple","red","silver","teal","white","yellow"]},window.fashion.$runtimeMode={"static":0,dynamic:1,scoped:3,globalDynamic:17,individual:7,live:9,triggered:32,generate:function(e,t,n,r,i){return(e?1:0)|(t?7:0)|(n?9:0)|(r?3:0)|(i?17:0)}},window.fashion.$loader={loadStyles:function(t){var n,r,i;return r=e.$loader.countScripts(),i=0,n="",e.$loader.loadIndividualStyles(function(e){return n+=e,++i===r?t(n):void 0})},loadIndividualStyles:function(e){return window.fashion.$loader.loadStyleTags(e)},loadStyleTags:function(t){var n,r,i,o,a,s,u;for(r=document.getElementsByTagName("style"),u=[],n=a=0,s=r.length;s>=0?s>a:a>s;n=s>=0?++a:--a)i=r[n].getAttribute("type"),i===window.fashion.mimeType&&(""!==r[n].textContent?u.push(t(r[n].textContent)):""!==r[n].getAttribute("src")?(o=r[n].getAttribute("src"),u.push(e.$loader.loadExternalScript(o,t))):u.push(void 0));return u},countScripts:function(){var e,t,n,r,i,o,a,s,u;for(e=0,r=document.getElementsByTagName("style"),t=o=0,s=r.length;s>=0?s>o:o>s;t=s>=0?++o:--o)i=r[t].getAttribute("type"),i===window.fashion.mimeType&&e++;for(n=document.getElementsByTagName("link"),t=a=0,u=n.length;u>=0?u>a:a>u;t=u>=0?++a:--a)i=n[t].getAttribute("type"),i===window.fashion.mimeType&&e++;return e},loadExternalScript:function(e,t){var n;return n=new XMLHttpRequest,n.onreadystatechange=function(){return 4===n.readyState&&200===n.status?t(n.responseText):n.status>400?console.log("[FASHION] Could not load script: "+e+" ("+n.status+")"):void 0},n.open("GET",e,!0),n.send()}},window.fashion.$parser={parse:function(t,n){var r,o,a,s;o=new i(n),t=e.$parser.removeComments(t),o=e.$parser.parseSections(t,o),s=o.selectors;for(r in s)a=s[r],e.$parser.parseSelectorBody(a.body,a,o);return o}},window.fashion.$parser.removeComments=function(e){return e.replace(/\/\*[\s\S]*?\*\/|\/\/.*?\n/g,"")},window.fashion.$parser.splitByTopLevelCommas=function(e){var t,n,r,i,o;for(n=0,t="",i=[],r=/(\(|\)|\,|[^\(\)\,]+)/g;o=r.exec(e);)","!==o[0]||0!==n?("("===o[0]&&n++,")"===o[0]&&n--,t+=o[0]):(i.push(t),t="");return i.push(t),i},window.fashion.$parser.splitByTopLevelSpaces=function(e){var t,n,r,i,o,a,s,u;for(r=0,s=i=n=!1,t="",a=[],o=/([^\(\)\"\'\`\s]*\(|\)|\"|\'|\`|([^\`\s]+(\s+[\+\-\/\*\=]\s+|[\+\-\/\*\=]))+[^\`\s]+|\s+(\&\&|\|\|)\s+|\s|[^\(\)\"\'\`\s]+)/g;u=o.exec(e);)" "!==u[0]||0!==r||s||i||n?("("===u[0][u[0].length-1]&&r++,")"===u[0]&&r--,"'"!==u[0]||i||n||(s=!s),'"'!==u[0]||s||n||(i=!i),"`"!==u[0]||i||s||(n=!n),t+=u[0]):(a.push(t),t="");return a.push(t),a},window.fashion.$parser.parseSections=function(t,n){var r,i,o,a;for(i=/([\s]*(\$([\w\-]+)\:[\s]*(.*?)\s*(![A-z0-9\-]+?)?[;\n]|\@([\w\-]+)[\s]*(.*?)[\s]*\{|(.*?)[\s]*?\{)|\{|\})/g;(o=i.exec(t))&&!(o.length<8)&&o[0];)o[3]&&o[4]?e.$parser.addVariable(n,o[3],o[4],o[5]):o[6]?(a=o.index+o[0].length,r=o[7]?e.$parser.splitByTopLevelSpaces(o[7]):[],n.addBlock({type:o[6],arguments:r,body:window.fashion.$parser.parseBlock(t,i,a)}),n.addBlockDependency(o[6],e.$blocks[o[6]])):o[8]?window.fashion.$parser.parseSelector(n,t,o[8],i,o.index+o[0].length):console.log("[FASHION] Problem around '"+o[0]+"';");return n},window.fashion.$parser.parseSelector=function(t,n,r,i,o){var a,s,u,l,d;for(l=[e.$parser.createSelector(t,r)],a=1,u=[0];a>0&&(s=i.exec(n));)d=l[u[u.length-1]],d.addToBody(n.substring(o,s.index)),o=s.index+s[0].length,"}"===s[0]?(u.pop(),a--):s[3]&&s[4]?d.addToBody(n.substring(s.index,o)):s[8]&&(r=e.$parser.nestSelector(d.rawName,s[8]),l.push(e.$parser.createSelector(t,r)),u.push(l.length-1),a++);return l},window.fashion.$parser.nestSelector=function(e,t){var n,r,i,o,a,s,u,l,d;if(n=[],!e)return t;if(!t)return e;for(l=e.split(","),o=0,s=l.length;s>o;o++)for(i=l[o],i=i.trim(),d=t.split(","),a=0,u=d.length;u>a;a++)r=d[a],r=r.trim(),n.push("&"===r[0]?i+r.substr(1):i+" "+r);return n.join(",")},window.fashion.$parser.createSelector=function(t,n){var r,i,o,a,u,l,p,f,h,m;if(f=new s(n),t.addSelector(f),-1===n.indexOf("$"))return f;for(p="return ",u=0,r=new c,l=/\$([\w\-]+)/g;a=l.exec(n);)a.index>u&&(p+="'"+n.substring(u,a.index)+"'+"),u=a.index+a[0].length,o=e.$parser.expressionExpander.localVariable,m=o(a[1],t),r.extend(m.bindings),p+=m.script+"+";return n.length>u&&(p+="'"+n.substr(u)+"'+"),h=p.substr(0,p.length-1),i=f.mode=e.$runtimeMode.dynamic,f.name=new d(h,e.$type.String,0,r,i),f.name.generate(),f},window.fashion.$parser.parseBlock=function(e,t,n){var r,i,o;for(r=1,i=n;r>0&&(o=t.exec(e));)i=o.index+o[0].length,"}"===o[0]?r--:"{"===o[0]?r++:o[6]?r++:o[8]&&r++;return e.substring(n,i-1).trim()},window.fashion.$parser.parseSelectorBody=function(t,n,r){var i,o,a,s,d,c,p,f,h,m,w,v,g,y,b,$;for(p=0,f=/[\s]*(\$?[\w\-\s]*)\:[\s]*(\[([\w\-\$\@]*)[\s]*([\w\-\$\@\%]*)[\s]*([\w\-\$\@\%]*)\]){0,1}[\s]*([^;}\n]*?)[\s]*(\![A-z0-9\-]+?)?[;}\n]/g,$=[];c=f.exec(t);)if(h=void 0,!(c.length<7))if(m=e.$parser.parsePropertyValues(c[6],r),s=c[1],"$"!==s[0]){if(c[3]&&(h=new l(e.$parser.parsePropertyValue(c[3],r,!1),e.$parser.parsePropertyValue(c[4],r,!1),e.$parser.parsePropertyValue(c[5],r,!1))),w=0,null!=(null!=m?m.mode:void 0))w=m.mode;else if(m instanceof Array)for(v=0,y=m.length;y>v;v++)if(i=m[v],null!=i){if(i instanceof Array)for(g=0,b=i.length;b>g;g++)o=i[g],null!=(null!=o?o.mode:void 0)&&(w|=o.mode);null!=i.mode&&(w|=i.mode)}a=n.mode|w||0,d=new u(s,m,a,h),"!important"===c[7]&&(d.important=!0),n.addProperty(d),$.push(p++)}else e.$parser.parseScopedVariable(s,m,c,n.name,r);return $},window.fashion.$parser.parseScopedVariable=function(t,n,r,i,o){if("array"==typeof n&&"array"==typeof n[0])throw new Error("Variable declaration '"+t+"' cannot have comma separated values");if(r[3])throw new Error("Variable declaration '"+t+"' cannot have a transition");if(r[7])throw new Error("Variable declaration '"+t+"' cannot be !important");return e.$parser.addVariable(o,t,n,r[7],i)},window.fashion.$parser.parsePropertyValues=function(e,t){var n,r,i,o;if(-1!==e.indexOf(",")){if(o=window.fashion.$parser.splitByTopLevelCommas(e),1===o.length)return window.fashion.$parser.parsePropertyValue(o[0],t);i=[];for(n in o)r=o[n],o[n]=r.trim();for(n in o)r=o[n],i[n]=window.fashion.$parser.parsePropertyValue(r,t,!0,!0);return i}return window.fashion.$parser.parsePropertyValue(e,t)},window.fashion.$parser.parsePropertyValue=function(t,n,r,i){var o,a,s,u,l,d;if(null==r&&(r=!0),null==i&&(i=!1),i||"string"==typeof t&&-1!==t.indexOf(" ")){if(o=e.$parser.splitByTopLevelSpaces(t),!i&&1===o.length)return window.fashion.$parser.parseSingleValue(t,n);for(u=function(){var t,r,i;for(i=[],t=0,r=o.length;r>t;t++)a=o[t],i.push(e.$parser.parseSingleValue(a,n));return i}(),u.mode=0,l=0,d=u.length;d>l;l++)s=u[l],u.mode|=s.mode||0;return u}return window.fashion.$parser.parseSingleValue(t,n)},window.fashion.$parser.identifyExpression=function(){return/(([\s][\+\-\/\*\=][\s])|\s(\&\&|\|\|)\s|[\(\)\[\]]|\@|\$)/g},window.fashion.$parser.parseSingleValue=function(t,n,r){return null==r&&(r=!1),t&&"string"==typeof t&&t.match(e.$parser.identifyExpression())?window.fashion.$parser.parseExpression(t,n,window.fashion.$functions,window.fashion.$globals,!0,r):t},window.fashion.$parser.parseExpression=function(t,n,r,i,o,a){var s,u,l,p,f,h,m,w,v,g,y,b,$,S,x,O,I,F,N,A,E,M,T,P;for(null==o&&(o=!0),null==a&&(a=!1),f=e.$parser.expressionExpander,v=window.fashion.$parser.matchParenthesis,$=t,g=e.$runtimeMode["static"],s=new c,A=[],M=[],m=!1,S=0,b=function(t,n,r){return $=e.$parser.spliceString($,t+S,n,r),S+=r.length-n},y=/(\$([\w\-]+)\s*?\=|\@(self|this|parent)\.?([a-zA-Z0-9\-\_\.]*)|\$([\w\-]+)|\@([\w\-]+)|([\-]{0,1}([\.]\d+|\d+(\.\d+)*)[a-zA-Z]{1,4})|([\w\-\@\$]*)\(|\)([^\s\)]*))/g,O=!1;!O&&(x=y.exec(t));)l=void 0,I=x.index,w=x[0].length,p=I+w,x[2]?(l=f.localVariable(x[2],n,!0),m=!0):x[3]?l=f.relativeObject(x[3],x[4]):x[5]?l=f.localVariable(x[5],n):x[6]?l=f.globalVariable(x[6],i,n):x[7]?l=f.numberWithUnit(x[7]):x[10]&&(T=v(y,t,p),u=T.body,F=T.unit,u||(u=t.substring(p,t.length-1),O=!0),w+=u.length+1,F&&(w+=F.length),l=f["function"](x[10],u,F,n,r,i)),l&&(l.script&&b(I,w,l.script),l.mode&&(g|=l.mode),l.bindings&&s.extend(l.bindings),A.push(void 0===l.type?e.$type.Unknown:l.type),M.push(l.unit||""));return P=e.$parser.determineExpressionType(A,M,t),N=P.type,E=P.unit,m&&(E=void 0),$=e.$parser.wrapExpressionScript($,o,N,E,a),h=new d($,N,E,s,g),o&&h.generate(),h},window.fashion.$parser.wrapExpressionScript=function(e,t,n,r,i){return t?!i&&r&&"string"==typeof r?"return ("+e+") + '"+r+"'":"return "+e:"{value: "+e+", type: "+n+", unit: '"+r+"'}"},window.fashion.$parser.spliceString=function(e,t,n,r){return e.substr(0,t)+r+e.substr(t+n)},window.fashion.$parser.matchParenthesis=function(e,t,n){var r,i,o,a;for(i=0,r="",o=n;a=e.exec(t);)if(-1!==a[0].indexOf("("))i++;else{if(-1!==a[0].indexOf(")")&&0===i--)return r+=t.substr(o,a.index-o),{body:r,unit:a[11]};r+=t.substr(o,a.index-o+a[0].length),o=a.index+a[0].length}return console.log("[FASHION] Could not match parens: "+t)},window.fashion.$parser.determineExpressionType=function(t,n,r){var i,o,a,s,u;o=a=void 0;for(i in t)if(s=t[i],s!==e.$type.Unknown){if(o){if(s!==o){if(s!==e.$type.String)return console.log("[FASHION] Found mixed types in expression: '"+r+"'"),{};o=e.$type.String}}else o=s;if(s===e.$type.Number||s===e.$type.Color){if(u=n[i],""===u)continue;if(a){if(u!==a)return console.log("[FASHION] Conflicting units '"+u+"' and '"+typeUnit[1]+"'"),console.log("[FASHION] Unit conversion will be implemented in the future"),{}}else a=u}}return{type:o,unit:a}},window.fashion.$parser.expressionExpander={localVariable:function(t,n,r){var i,o,a,s,u,l,p,f,h,m,w;if(null==r&&(r=!1),w=n.variables,p=w[t],!p)return console.log("[FASHION] Variable $"+t+" does not exist.");o=!1,f=h=s=-1;for(l in p)m=p[l],0!==l&&(a=!1),f=m.type,h=m.unit,s=m.mode;return r?u="v('"+t+"'"+(o?",e":"")+").value =":(i=new c("variable",t),u="v('"+t+"'"+(o?",e":"")+").value"),s=o?s|e.$runtimeMode.individual:s,new d(u,f,h,i,s)},globalVariable:function(e,t,n){var r,i,o;return e=e.toLowerCase(),(o=t[e])?(n.addGlobalDependency(e,o),r=new c("global",e),i="g."+e+".get()",new d(i,o.type,o.unit,r,o.mode)):console.log("[FASHION] Variable $"+e+" does not exist.")},numberWithUnit:function(t){var n,r,i;return r=window.fashion.$type.Number,n=e.$runtimeMode["static"],i=window.fashion.$shared.getUnit(t,r,e.$type,e.$unit),0/0===i.value&&(i.value=0),new d(i.value,r,i.unit,!1,n)},relativeObject:function(t,n){var r,i,o,a,s;return"parent"===t&&(n=".parent"+n),r=n.split("."),i=r[r.length-1],null==n?a=e.$type.Element:"top"===i||"bottom"===i||"left"===i||"right"===i||"number"===i||"width"===i||"height"===i?(a=e.$type.Number,s="px"):a=e.$type.String,o=n?"e('"+n+"','"+t+"')":"e(void 0, "+JSON.stringify(t)+")",new d(o,a,s,!1,e.$runtimeMode.individual)},"function":function(e,t,n,r,i,o){var a,s,u,l,p,f,h,m,w,v,g,y,b,$,S,x,O,I;if($=r.variables,h=i[e],!h)return console.log("[FASHION] Function $"+e+" does not exist.");if(t.length>1){for(u=window.fashion.$parser.splitByTopLevelCommas(t),f=[],w=[],S=0,O=u.length;O>S;S++)a=u[S],(s=a.match(/([a-zA-Z0-9\-\'\"]+)\s*\:\s*(.*)/))?(v="'"+s[1]+"': ",v+=window.fashion.$parser.parseExpression(s[2],r,i,o,0).script,w.push(v)):f.push(window.fashion.$parser.parseExpression(a,r,i,o,!1));w.length>0&&f.push({script:"{"+w.join(",")+"}"})}else f=[];for(y=["t"],m=h.mode,l=new c,x=0,I=f.length;I>x;x++)p=f[x],null!=p.script&&(m|=p.mode,y.push(p.script),l.extend(p.bindings));return b=""!==h.unit?h.unit:void 0!==h.unitFrom?f[h.unitFrom].unit:"",r.addFunctionDependency(e,h),g="f['"+e+"'].get.call("+y.join(",")+")",new d(g,h.type,n||b,l,m)}},window.fashion.$parser.addVariable=function(t,n,r,i,o){var s,u,l,c,p,f;if(r=e.$parser.parseSingleValue(r,t,!0),f=new a(n,r,o),"!static"===i&&(f.mode=e.$runtimeMode["static"]),t.addVariable(f),r instanceof d)s=r.type,l=r.unit;else{if(p=f.raw||f.value,!p)return;s=window.fashion.$shared.determineType(p,e.$type,e.$typeConstants),c=window.fashion.$shared.getUnit(p,s,e.$type,e.$unit),u=c.value,l=c.unit}return f.annotateWithType(s,l,u)},window.fashion.$processor={process:function(t){return t=window.fashion.$processor.blocks(t,e.$blocks),t=window.fashion.$processor.properties(t,e.$properties)}},window.fashion.$processor.api={throwError:function(e,t){return console.log("[FASHION: "+e+"] "+t)},setProperty:function(t,n,r,i){var o;return o=new u(r,i,i.mode||e.$runtimeMode["static"]),t.insertProperty(o,n+1)},getProperty:function(e,t,n){var r;return r=void 0,e.forEachMatchingSelector(t,function(e){return e.forEachPropertyNamed(n,function(e){return r?!1:r=e.value}),r?!1:void 0}),r},addRule:function(t,n,r){var i;return i=e.$parser.createSelector(t,n),e.$parser.parseSelectorBody(r+"\n",i,t)},addScript:function(e,t){return e.addScript(t)},requireModule:function(e,t){return e.addRequirements([t])},parseValue:function(t,n,r){return r&&"string"==typeof r?e.$parser.parseSingleValue(r,n,t):""},determineType:function(t){return t.type?t.type:"string"==typeof t?window.fashion.$shared.determineType(t,e.$type,e.$typeConstants):e.$type.Unknown},determineUnit:function(t){return t.unit?t.unit:"string"==typeof t?window.fashion.$shared.getUnit(t,e.$type.Number,e.$type,e.$unit).unit:""}},window.fashion.$processor.blocks=function(e,t){var n,r,i,o,a,s;a=window.fashion.$processor.api,s=e.blocks;for(r in s)i=s[r],o=t[i.type],o&&(n={throwError:a.throwError.bind(0,i.type),addRule:a.addRule.bind(0,e),addScript:a.addScript.bind(0,e),requireModule:a.requireModule.bind(0,e),parseValue:a.parseValue.bind(0,e,"b"+r),parse:a.parseBody.bind(0,e),runtimeObject:e.dependencies.blocks[i.type].runtimeObject,addVariable:a.addVariable.bind(0,e)},o.compile.call(n,i.arguments,i.body));return e},window.fashion.$processor.api.parseBody=function(t,n){return e.$parser.parse(n,t)},window.fashion.$processor.api.addVariable=function(t,n,r){return e.$parser.addVariable(t,n,r)},window.fashion.$processor.properties=function(t,n){var r,i,o,a,s,u,l,d,c,p,f;i=window.fashion.$processor.api,l=e.$runtimeMode,p=t.selectors;for(c in p){d=p[c],o=-1,f=d.properties;for(a in f)s=f[a],o++,u=n[s.name],u&&(r={throwError:i.throwError.bind(0,s),setProperty:i.setProperty.bind(0,d,o),getProperty:i.getProperty.bind(0,t,d.name),parseValue:i.parseValue.bind(0,t,[c,a]),determineType:i.determineType,determineUnit:i.determineUnit},(u.mode&l.individual)===l.individual?(t.addPropertyDependency(s.name,u),s.mode|=u.mode):(n[s.name].compile.call(r,s.value),u.replace&&d.deleteProperty(o--)))}return t},window.fashion.$shared={},window.fashion.$shared.getVariable=function(e,t,n,r,i,o){var a;return a=e[i],a?"string"==typeof a||"number"==typeof a?{value:a}:a[0]?a[0]:a.scope&&a.scope.length>0?this.throwError("Scoped variables are not yet supported"):void 0!==a["default"]?a["default"].evaluate?{value:this.evaluate(a["default"],e,t,n,r,o)}:{value:a["default"]}:this.throwError("Variable '"+i+"' does not exist."):(console.log("[FASHION] Could not find variable '"+i+"'"),{value:void 0})},window.fashion.$shared.evaluate=function(t,n,r,i,o,a,s){var u,l,d,c,p,f,h,m,w,v;return null==s&&(s=!0),c=!1,d=(null!=(w=this.runtimeModes)?w.individual:void 0)||("undefined"!=typeof e&&null!==e&&null!=(v=e.$runtimeMode)?v.individual:void 0),l=function(e){return function(t){var s,u,l,p,f,h,m,w;if("string"==typeof t)return t;if("number"==typeof t)return t;if(h=[],f=function(t,a){var s;return s=e.getVariable(n,r,i,o,t,a),h.push({name:t,object:s,value:s.value}),s},((t.mode&d)===d||null!=a)&&null!=e.elementFunction){if(null==a)return e.throwError("Expression requires element but none provided");if(u=e.elementFunction(a),null==u)return e.throwError("Could not generate element function")}if(t.evaluate){try{p=t.evaluate(f,r,i,o,u)}catch(v){return s=v,console.log("[FASHION] Could not evaluate: "+t.evaluate),console.log(s)}if(t.important===!0&&(c=!0),t.setter)for(m=0,w=h.length;w>m;m++)l=h[m],l.object.value!==l.value&&e.setVariable(l.name,l.object.value);return p}return t.value?t.value:void 0}}(this),u=function(e,t){return t&&s?e+" !important":e},t instanceof Array?0===t.length?"":t[0]instanceof Array?u(function(){var e,n,r;for(r=[],e=0,n=t.length;n>e;e++)m=t[e],r.push(function(){var e,t,n;for(n=[],e=0,t=m.length;t>e;e++)h=m[e],n.push(l(h));return n}().join(" "));return r}().join(", "),c):(p=function(){var e,n,r;for(r=[],e=0,n=t.length;n>e;e++)f=t[e],r.push(l(f));return r}().join(" "),u(p,c)):u(l(t),c)};var o=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};window.fashion.$shared.determineType=function(e,t,n){var r,i;return"number"==typeof e?t.Number:(i=function(e){return'"'===e[0]||"'"===e[0]?t.String:e.charCodeAt(0)>47&&e.charCodeAt(0)<58||"-"===e[0]||"."===e[0]?t.Number:"#"===e[0]||0===e.toLowerCase().indexOf("rgb")?t.Color:r(e)||window.fashion.$type.Unknown},r=function(e){return n?n.colors&&o.call(n.colors,e)>=0?t.Color:void 0:t.Unknown},i(e))},window.fashion.$shared.getUnit=function(e,t,n,r){var i;return"number"==typeof e?{value:parseFloat(e),unit:""}:(i=function(){var t,n,i;return n=/([0-9\-\.]*)(.*?)/,t=n.exec(e),t.length<2?{value:parseFloat(e),unit:""}:(i=e.replace(t[1],""),r=r.Number[i],r?{value:parseFloat(t[1]),unit:r}:{value:parseFloat(t[1]),unit:""})},t===n.Number?i():(t===n.String&&("'"===e[0]||'"'===e[0])&&(e=e.substring(1,e.length-1)),{value:e,unit:""}))},window.fashion.$shared.timeInMs=function(e){return e?"number"==typeof e?e:"ms"===e.unit?e.value:"s"===e.unit?1e3*e.value:parseInt(e.value):0},window.fashion.color={cssTOjs:function(t,n){var r;return null==n&&(n=e.color),"#"===t[0]?n.hexTOrgb(t):(r=t.match(/rgba?\((.*?),(.*?),([^,]*),?(.*?)\)/))?{r:parseInt(r[1]),g:parseInt(r[2]),b:parseInt(r[3]),a:parseFloat(r[4]||1)}:void 0},hexTOrgb:function(e){var t,n;return void 0===e?{r:0,g:0,b:0}:(n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,e=e.replace(n,function(e,t,n,r){return t+t+n+n+r+r}),t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:{r:0,g:0,b:0})},rgbTOhex:function(e,t,n){var r,i;return"object"==typeof e&&(i=[e.r,e.g,e.b],e=i[0],t=i[1],n=i[2]),r=function(e){var t;return"string"==typeof e&&(e=parseInt(e)),t=e.toString(16),1===t.length?"0"+t.toUpperCase():t.toUpperCase()},"#"+r(parseInt(e))+r(parseInt(t))+r(parseInt(n))},hsbTOrgb:function(e,t,n){var r,i,o;return"object"==typeof e&&(o=[e.h,e.s,e.b],e=o[0],t=o[1],n=o[2]),i=Math,t/=100,n/=100,r=function(r){return 255*(t*n*i.max(i.min(i.abs((e+r)/60%6-3)-1,1),0)+n*(1-t))},{r:r(0),g:r(240),b:r(120)}},rgbTOhsb:function(e,t,n){var r,i,o,a,s,u,l,d,c,p,f,h;if("object"==typeof e&&(c=[e.r,e.g,e.b],e=c[0],t=c[1],n=c[2]),d=Math.max(e,t,n),e/=255,t/=255,n/=255,o=Math.max(e,t,n),a=Math.min(e,t,n),o===a)return{h:0,s:0,b:d/2.55};switch(s=o-a,a){case e:p=[t-n,3],l=p[0],i=p[1];break;case t:f=[n-e,5],l=f[0],i=f[1];break;case n:h=[e-t,1],l=h[0],i=h[1]}return r=60*(i-l/s)%360,u=s/o*100,{h:r,s:u,b:d/2.55}}},window.fashion.$actualizer={actualize:function(t){var n,r,i,o,a,s,u,l,d,c;return l=e.$runtimeMode,n=e.$actualizer,n.separateTransitions(t),c=n.splitIndividual(t.selectors),i=c.cssSels,o=c.individualSels,n.hideIndividualizedSelectors(i,t.scripts,o),s=n.filterStatic(i),d=n.generateRuntimeData(t,s,o),n.addBindings(d,s,o),n.autoAddRequirements(d,t,t.selectors),n.addRuntimeFunctions(d,t),n.removeUnnecessaryModuleData(d),t.scripts.push("document.dispatchEvent(new Event('"+e.readyEvent+"'));"),r=n.createCSS(d,i),u=n.minifier.runtimeData(d),a=n.createJS(d,u,t.scripts),{css:r,js:a}}},window.fashion.$actualizer.jsHeader="/*\\\n|*| GENERATED BY FASHION "+e.version+"\n|*| "+e.url+" - "+e.author+"\n\\*/",window.fashion.$actualizer.createJS=function(t,n,r){return""+window.fashion.$actualizer.jsHeader+"\nwindow."+e.minifiedObject+" = "+e.$stringify(n)+";\nwindow."+e.runtimeObject+" = "+e.$stringify({config:t.config,modules:t.modules,runtime:t.runtime,selectors:{},individual:{},variables:{}})+";\nFSEXPAND = "+e.$stringify(e.$actualizer.minifier.expandRuntimeData)+";\nFSEXPAND(window."+e.minifiedObject+",window."+e.runtimeObject+");\nFSREADY = function(r){d=document;c=\"complete\";\n	if(d.readyState==c)r()\n	else d.addEventListener('readystatechange',function(){if(d.readyState==c)r()})\n}\n"+r.join("\n")},window.fashion.$actualizer.splitIndividual=function(t){var n,r,i,o,a,u,l,d,c,p,f,h;i={},d={},n=u=0,a=e.$runtimeMode.individual;for(o in t){f=t[o],r=new s(f.name,f.mode),l=new s(f.name,f.mode),h=f.properties;for(c in h)p=h[c],(p.mode&a)===a?l.addProperty(p):r.addProperty(p);r.properties.length>0&&(r.rule=n++,i[o]=r),l.properties.length>0&&(l.rule=u++,d[o]=l)
}return{cssSels:i,individualSels:d}},window.fashion.$actualizer.filterStatic=function(e){var t,n,r,i,o,a,u,l;i={};for(r in e){u=e[r],t=new s(u.name,u.mode),t.rule=u.rule,t.properties={},n=!1,l=u.properties;for(o in l)a=l[o],a.mode>0&&(n=!0,t.properties[o]=a);n&&(i[r]=t)}return i};var o=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};window.fashion.$actualizer.addBindings=function(t,n,r){return e.$actualizer.bindSelectors(t,n,"s"),e.$actualizer.bindSelectors(t,r,"i"),e.$actualizer.bindVariables(t)},window.fashion.$actualizer.bindSelectors=function(t,n,r){var i,o,a,s,u,l,c,p,f;p=e.$runtimeMode.triggered,f=[];for(c in n)l=n[c],l.name instanceof d&&(i=[r,parseInt(c)],e.$actualizer.bindExpression(t,l.name,i)),f.push(function(){var n,f;n=l.properties,f=[];for(s in n)u=n[s],(u.mode&p)!==p&&(i=[r,parseInt(c),e.$actualizer.makeCamelCase(u.name)],f.push(u.value instanceof Array?function(){var n,r,s,l;for(s=u.value,l=[],n=0,r=s.length;r>n;n++)a=s[n],l.push(a instanceof Array?function(){var n,r,s;for(s=[],n=0,r=a.length;r>n;n++)o=a[n],s.push(o instanceof d?e.$actualizer.bindExpression(t,o,i):void 0);return s}():a instanceof d?e.$actualizer.bindExpression(t,a,i):void 0);return l}():u.value instanceof d?e.$actualizer.bindExpression(t,u.value,i):void 0));return f}());return f},window.fashion.$actualizer.bindVariables=function(t){var n,r,i,o,a,s,u;s=t.variables,u=[];for(a in s)o=s[a],u.push(function(){var s,u;s=o.values,u=[];for(r in s)i=s[r],i instanceof d?(n=["v",a,r],u.push(e.$actualizer.bindExpression(t,i,n))):u.push(void 0);return u}());return u},window.fashion.$actualizer.bindExpression=function(e,t,n){var r,i,a,s,u,l,d,c,p,f,h;for(p=t.bindings.variables,u=0,d=p.length;d>u;u++)s=p[u],a=e.variables[s],a?a.addDependent(n):console.log("[FASHION] Could not bind to nonexistent variable: '"+s+"'");for(f=t.bindings.globals,h=[],l=0,c=f.length;c>l;l++)if(i=f[l],r=e.modules.globals[i]){if(null==r.dependents&&(r.dependents=[]),o.call(r.dependents,n)>=0)continue;h.push(r.dependents.push(n))}else h.push(console.log("[FASHION] Could not bind to nonexistent global: '"+s+"'"));return h},window.fashion.$actualizer.makeCamelCase=function(e){return null==e?"":e.replace(/-([a-z])/gi,function(e,t){return t.toUpperCase()})};var b;b=function(){function t(t,n,r){this.config=e.runtimeConfig,this.selectors=n,this.variables=r,this.modules=t.dependencies,this.runtime={}}return t.prototype.addRuntimeModule=function(e){var t,n,r;r=e.functions;for(n in r){if(t=r[n],this.runtime[n])return;this.runtime[n]=t}},t}();var $,o=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};$=function(){function t(t,n,r,i){this.name=t,this.type=n,this.unit=r,this.mode=i||e.$runtimeMode["static"],this.scopes=[],this.values={},this.dependents=[],this["default"]=void 0}return t.prototype.addScope=function(e,t){return this.values[e]=t,0===e||"0"===e?this["default"]=t:this.scopes.push(e)},t.prototype.addDependent=function(e){return o.call(this.dependents,e)>=0?void 0:this.dependents.push(e)},t}(),window.fashion.$actualizer.generateRuntimeData=function(t,n,r){var i,o;return o=e.$actualizer.actualizeVariables(t,n,r),i=new b(t,n,o),r&&(i.individual=r),i},window.fashion.$actualizer.actualizeVariables=function(e){var t,n,r,i,o,a,s,u,l,d;l={},d=e.variables;for(s in d){i=d[s],o=a=-1,t=0;for(n in i)u=i[n],null!=u.type&&(o=u.type),null!=u.unit&&(a=u.unit),null!=u.mode&&(t|=u.mode);r=new $(s,o,a,t);for(n in i)u=i[n],r.addScope(n,u.value);l[s]=r}return l},window.fashion.$actualizer.removeUnnecessaryModuleData=function(e){var t,n,r,i;r=e.modules.blocks,i=[];for(n in r)t=r[n],t.runtimeObject&&i.push(e.modules.blocks[n]=t.runtimeObject);return i},window.fashion.$actualizer.createCSS=function(t,n){var r,i,o,a,s,u,l,d,c,p,f;a=e.$actualizer.evaluationFunction(t),r="";for(s in n){d=n[s],i=[],f=d.properties;for(u in f)l=f[u],null==l.value&&console.log(d),(d.mode&e.$runtimeMode.globalDynamic)>2||(p=l.value,o=a(d.mode===e.$runtimeMode["static"]?"object"==typeof p&&p.value?p.value:p:p),i.push(e.$actualizer.cssPropertyTemplate(l,o)));c=a(d.name),r+=e.$actualizer.cssSelectorTemplate(c,i)}return r},window.fashion.$actualizer.cssPrefixes=["","-webkit-","-moz-","-ms-"],window.fashion.$actualizer.separateTransitions=function(t){var n,r,i,o,a,s,l,d,c,p,f,h,m,w,v;n=e.$actualizer.evaluationFunction(null,t),a=window.fashion.$actualizer.cssPrefixes,p=0,m=t.selectors,v=[];for(r in m){d=m[r],f=[],w=d.properties;for(i in w)s=w[i],"length"!==i&&s.value.transition&&(l=s.value.transition,l.property=s.name,f.push(l),p|=l.easing.mode|l.duration.mode|l.delay.mode);h=function(){var e,t,n;for(n=[],e=0,t=f.length;t>e;e++)c=f[e],n.push([c.property,c.duration,c.easing,c.delay]);return n}(),h&&0!==h.length&&(s=new u("transition",h,p),v.push(function(){var e,t,n;for(n=[],e=0,t=a.length;t>e;e++)o=a[e],n.push(d.addProperty(s.copyWithName(o+"transition")));return n}()))}return v},window.fashion.$actualizer.evaluationFunction=function(t,n){return function(r){return window.fashion.$shared.evaluate.call(window.fashion.$shared,r,t?t.variables:n.variables,e.$globals,e.$functions,t?t.runtime:{})}},window.fashion.$actualizer.cssPropertyTemplate=function(e,t){return""+e.name+": "+t+(e.important?" !important":"")+";"},window.fashion.$actualizer.cssSelectorTemplate=function(e,t){return""+e+" {"+t.join("")+"}\n"},window.fashion.$actualizer.cssTransitionTemplate=function(e,t,n,r){return""+e+" "+(t||"1s")+" "+(n||"")+(r?" "+r:"")},window.fashion.$runtimeCapability={variables:"variables",scopedVariables:"scopedVariables",individualProps:"individualized",liveProps:"liveProperties",globals:"globals"},window.fashion.$actualizer.autoAddRequirements=function(t,n){var r,i,o,a,s;if(r=n.addRequirements.bind(n),"{}"!==JSON.stringify(t.variables))for(r([e.$runtimeCapability.variables]),s=t.variables,o=0,a=s.length;a>o;o++)i=s[o],i.scopes.length>0&&r([e.$runtimeCapability.scopedVariables]);return e.$actualizer.hasPropertyMode(n.selectors,e.$runtimeMode.individual)&&r([e.$runtimeCapability.individualProps]),e.$actualizer.hasPropertyMode(n.selectors,e.$runtimeMode.live)&&r([e.$runtimeCapability.liveProps]),"{}"!==JSON.stringify(t.modules.globals)?r([e.$runtimeCapability.globals]):void 0},window.fashion.$actualizer.hasPropertyMode=function(e,t){var n,r,i,o,a;for(n in e){o=e[n],a=o.properties;for(r in a)if(i=a[r],(i.mode&t)===t)return!0}return!1},window.fashion.$actualizer.addRuntimeFunctions=function(t,n){var r,i,o,a,s,u,l,d;if(n.requires)for(r=0;r<n.requires.length;)if(s=n.requires[r++],void 0!==s){if(a=e.$runtimeModules[s],!a)return console.log("[FASHION] Could not find module "+s);if(n.addRequirements(a.requires),t.addRuntimeModule(a),a.initializers.length>0)for(d=a.initializers,u=0,l=d.length;l>u;u++)o=d[u],i="window."+e.runtimeObject+".runtime."+o+".bind(FASHION.runtime)",n.addScript("FSREADY("+i+");")}},window.fashion.$actualizer.hideIndividualizedSelectors=function(t,n,r){var i,o,a,l,d,c,p,f;o=[];for(a in r)p=r[a],"string"==typeof p.name&&o.push(p.rawName);if(o&&!(o.length<1)){l=o.join(","),i=new s(l,e.$runtimeMode["static"]),i.addProperty(new u("visibility","hidden")),t.hs=i,c=0;for(d in t)f=t[d],c++;return n.push("FSREADY(function(){\n	ss = document.getElementById(FASHION.config.cssId);\n	if(ss&&ss.sheet)ss.sheet.deleteRule("+(c-1)+");\n});")}},window.fashion.$actualizer.minifier={runtimeData:function(e){var t,n,r,i,o,a;return t=window.fashion.$actualizer.minifier,o=r=0,[function(){var r,o;r=e.selectors,o=[];for(n in r)i=r[n],o.push(t.selector(n,i));return o}(),function(){var r,i;r=e.variables,i=[];for(n in r)a=r[n],i.push(t.variable(a));return i}(),function(){var r,o;r=e.individual,o=[];for(n in r)i=r[n],o.push(t.selector(n,i));return o}()]},selector:function(e,t){var n,r,i,o,a,u;if(n=window.fashion.$actualizer.minifier,t&&t instanceof s){r=t.name instanceof d?n.expression(t.name):t.name,o=[],u=t.properties;for(i in u)a=u[i],o.push(n.property(a));return["s",parseInt(e),t.rule,r,t.mode,o]}},property:function(e){var t,n,r,i,o,a,s;if(t=window.fashion.$actualizer.minifier,e&&e instanceof u){if(e.value instanceof Array)for(i=[],s=e.value,o=0,a=s.length;a>o;o++)r=s[o],i.push(r instanceof d?t.expression(r):r);else i=e.value instanceof d?t.expression(e.value):e.value;return n=e.important?1:0,["p",e.name,e.mode,n,i]}},expression:function(e){return e&&e instanceof d?["e",e.mode,e.type,e.unit,e.setter,e.script]:void 0},variable:function(e){var t,n,r,i,o,a,s,u;if(t=window.fashion.$actualizer.minifier,e&&e instanceof $){for(n=e["default"]instanceof d?t.expression(e["default"]):e["default"],o=[],u=e.values,a=0,s=u.length;s>a;a++)i=u[a],o.push(i instanceof d?t.expression(i):i);return r=["v",e.name,e.type,e.unit,e.mode,n,e.dependents],e.scopes&&r.push.apply(r,[e.scopes,o]),r}}},window.fashion.$actualizer.minifier.expandRuntimeData=function(e,t){var n,r,i,o,a,s,u,l,d,c,p,f,h,m,w,v;for(r={s:function(e){return{rule:e[2],name:n(e[3]),mode:e[4],properties:n(e[5])}},p:function(e){return{name:e[1],mode:e[2],important:e[3],value:n(e[4])}},e:function(e){return{mode:e[1],type:e[2],unit:e[3],setter:e[4],evaluate:Function("v","g","f","t","e",e[5])}},v:function(e){return{name:e[1],type:e[2],unit:e[3],mode:e[4],"default":n(e[5]),dependents:e[6],scopes:e[7],values:n(e[8])}}},n=function(e){var t,n,i,o;if(!(e instanceof Array))return e;if(0===e.length)return 0;if("string"==typeof e[0]&&r[e[0]])return r[e[0]](e);for(n=[],i=0,o=e.length;o>i;i++)t=e[i],n.push(r[t[0]]?r[t[0]](t):t);return n},h=e[0],u=0,c=h.length;c>u;u++)i=h[u],o=n(i),o.sheet="s",t.selectors[i[1]]=o;for(m=e[1],l=0,p=m.length;p>l;l++)a=m[l],s=n(a),t.variables[s.name]=s;if(e[2]){for(w=e[2],v=[],d=0,f=w.length;f>d;d++)i=w[d],o=n(i),o.sheet="i",v.push(t.individual[i[1]]=o);return v}};var S;S=function(){function e(e,t,n){var r,i;this.name=e,this.requires=t,this.functions=n,this.initializers=[];for(i in n)r=n[i],"$"===i[0]&&this.initializers.push(i)}return e}(),window.fashion.$runtimeModules={},window.fashion.addRuntimeModule=function(e,t,n){return window.fashion.$runtimeModules[e]=new S(e,t,n)},e.addRuntimeModule("types",[],{determineType:window.fashion.$shared.determineType,getUnit:window.fashion.$shared.getUnit,timeInMs:window.fashion.$shared.timeInMs}),e.addRuntimeModule("evaluation",[],{evaluate_Shared:window.fashion.$shared.evaluate,evaluate:function(e,t,n){var r,i,o,a;if(null!=n){o=n,a=FASHION.variables;for(r in a)i=a[r],null==o[r]&&(o[r]=i)}else o=FASHION.variables;return this.evaluate_Shared(e,o,FASHION.modules.globals,FASHION.modules.functions,FASHION.runtime,t)}}),e.addRuntimeModule("colors",[],window.fashion.color),e.addRuntimeModule("errors",[],{throwError:function(e){return console.log("[FASHION] Runtime error: "+e),console.log((new Error).stack)}}),e.addRuntimeModule("wait",[],{wait:function(e,t){return setTimeout(t,e)}}),e.addRuntimeModule("variables",["evaluation","selectors","types","errors"],{getVariable:window.fashion.$shared.getVariable,variableValue:function(e,t){return this.getVariable(FASHION.variables,FASHION.modules.globals,FASHION.modules.functions,FASHION.runtime,e,t).value},setVariable:function(e,t,n){return void 0===n?this.setTopLevelVariable(e,t):console.log("Scoped variable setting coming soon")},setTopLevelVariable:function(e,t){var n;return(n=FASHION.variables[e])?0===n.mode?this.throwError("Cannot change static variables"):(n["default"]=t,this.updateDependencies(e)):this.throwError("Variable '$"+e+"' does not exist")},updateDependencies:function(e){var t,n,r,i,o,a;for(n=FASHION.variables[e],o=n.dependents,a=[],r=0,i=o.length;i>r;r++)t=o[r],a.push("v"===t[0]?this.updateDependencies(t[1]):3===t.length?this.setPropertyOnSelector(t[0],t[1],t[2]):this.regenerateSelector(t[0],t[1]));return a},$initWatchers:function(){var e,t,n,r,i,o;window[FASHION.config.variableObject]=t={},i=FASHION.variables,o=[];for(n in i)r=i[n],e=function(){return function(e){return{get:function(){return FASHION.runtime.variableValue(e)},set:function(t){return FASHION.runtime.setVariable(e,t)}}}}(this)(n),Object.defineProperty(t,n,e),o.push(Object.defineProperty(t,"$"+n,e));return o}}),e.addRuntimeModule("selectors",["evaluation","errors"],{runtimeModes:window.fashion.$runtimeMode,makeCamelCase:function(e){var t,n;return null==e||null==e.name?"":(null==e.jsName&&(n=e.name,t=n.replace(/-([a-z])/gi,function(e,t){return t.toUpperCase()}),e.jsName=t),e.jsName)},setPropertyOnSelector:function(e,t,n){var r,i,o,a,s,u,l,d,c,p;if("i"===e)return this.setPropertyOnIndividual(t,n);for(u=FASHION.selectors[t],e=document.getElementById(FASHION.config.cssId).sheet,s=e.rules||e.cssRules,a=e.rules[u.rule],c=u.properties,p=[],l=0,d=c.length;d>l;l++)r=c[l],this.makeCamelCase(r)===n&&(r.important?(i=new RegExp(r.name+":.*?;","g"),o=""+r.name+": "+this.CSSRuleForProperty(r,void 0,!0)+";",p.push(a.style.cssText=a.style.cssText.replace(i,o))):p.push(a.style[n]=this.CSSRuleForProperty(r,void 0,!0)));return p},regenerateSelector:function(e,t){var n,r,i;return"i"===e?this.regenerateIndividualSelector(t):(r=FASHION.selectors[t])?(n=document.getElementById(""+FASHION.config.cssId),i=n.sheet,i.deleteRule(r.rule),i.insertRule(this.CSSRuleForSelector(r),r.rule)):this.throwError("Selector "+t+" does not exist")},CSSPropertyTemplate:window.fashion.$actualizer.cssPropertyTemplate,CSSSelectorTemplate:window.fashion.$actualizer.cssSelectorTemplate,CSSRuleForProperty:function(e,t,n){var r,i,o;if(null==n&&(n=!1),i=FASHION.modules.properties[e.name]){if(r=this.evaluate.bind(this,e.value,t),!i.apply)return;if(i.apply(t,e.value,r),i.replace)return}return o=this.evaluate(e.value,t),n?o+(1===e.important?" !important":""):this.CSSPropertyTemplate(e,o)},CSSRuleForSelector:function(e,t,n){var r,i,o;return o=n||this.evaluate(e.name,t),r=function(){var n,r,o,a;for(o=e.properties,a=[],n=0,r=o.length;r>n;n++)i=o[n],a.push(this.CSSRuleForProperty(i,t));return a}.call(this),this.CSSSelectorTemplate(o,r)}}),e.addRuntimeModule("individualized",["selectors","elements","stylesheet-dom","individualizedHelpers"],{$initializeIndividualProperties:function(){var e,t,n,r;FASHION.individualSheet=this.addStylesheet(""+FASHION.config.individualCSSID).sheet,n=FASHION.individual;for(e in n)t=n[e],this.updateSelectorElements(t);r=FASHION.individual;for(e in r)t=r[e],this.regenerateIndividualSelector(e);return this.watchForDOMAddition(),window.FASHION.pageChanged=window.FASHION.domChanged=this.pageChanged.bind(this)},updateSelectorElements:function(e){var t,n,r,i,o,a,s,u,l;u=e.elements;for(n in u)r=u[n],-1!==r.cssid&&FASHION.individualSheet.deleteRule(r.cssid);for(o=this.evaluate(e.name),e.elementsSelector=o,e.elements={},i=this.elementsForSelector(o),l=[],a=0,s=i.length;s>a;a++)t=i[a],t.id||t.setAttribute("id",this.generateRandomId()),l.push(e.elements[t.id]={element:t,cssid:-1});return l},setPropertyOnIndividual:function(e,t){var n,r,i,o,a,s,u;a=FASHION.individual[e],s=a.elements,u=[];for(n in s)r=s[n],null!=r.cssid&&-1!==r.cssid?(o=FASHION.individualSheet.rules[r.cssid],u.push(function(){var e,n,s,u;for(s=a.properties,u=[],e=0,n=s.length;n>e;e++)i=s[e],this.makeCamelCase(i)===t&&u.push(o.style[t]=this.CSSRuleForProperty(i,r.element,!0));return u}.call(this))):this.regenerateElementSelector(a,n,r);return u},regenerateIndividualSelector:function(e){var t,n,r,i,o;r=FASHION.individual[e],r||this.throwError("Could not find individual selector "+e),this.evaluate(r.name)!==r.elementsSelector&&this.updateSelectorElements(r),i=r.elements,o=[];for(n in i)t=i[n],o.push(this.regenerateElementSelector(r,n,t));return o},regenerateElementSelector:function(e,t,n){var r;return-1!==n.cssid?FASHION.individualSheet.deleteRule(n.cssid):n.cssid=FASHION.individualSheet.rules.length,r=this.CSSRuleForSelector(e,n.element,"#"+t),FASHION.individualSheet.insertRule(r,n.cssid)},watchForDOMAddition:function(){return window.FASHION_NO_OBSERVE!==!0?(window.FSOBSERVER=new MutationObserver(function(e){var t,n,r;if(null!=window.FSOBSERVER&&null!=window.FASHION&&null!=FASHION.runtime.addedElements&&window.FASHION_NO_OBSERVE!==!0){for(n=0,r=e.length;r>n;n++)t=e[n],t.addedNodes.length>0&&FASHION.runtime.addedElements(t.addedNodes);return!0}}),window.FSOBSERVER.observe(document.body,{childList:!0,subtree:!0})):void 0},pageChanged:function(e){var t,n,r,i,o,a,s;if(null!=e)return this.addedElements(e);e=[],s=FASHION.individual;for(n in s)for(i=s[n],r=this.elementsForSelector(i.elementsSelector),o=0,a=r.length;a>o;o++)t=r[o],i.elements[t.id]||e.push(t);return this.addedElements(e)},addedElements:function(e){var t,n,r,i,o,a,s,u;if("undefined"!=typeof FASHION&&null!==FASHION){for(u=[],a=0,s=e.length;s>a;a++)t=e[a],o=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector,u.push(function(){var e,o;e=FASHION.individual,o=[];for(n in e)i=e[n],i.elements[t.id]||t.matches(i.name)&&(t.id||t.setAttribute("id",this.generateRandomId()),r={element:t,cssid:-1},i.elements[t.id]=r,o.push(this.regenerateElementSelector(i,t.id,r)));return o}.call(this));return u}}}),e.addRuntimeModule("individualizedHelpers",[],{generateRandomId:function(e){var t,n;return null==e&&(e=20),t=function(){var t,r;for(r=[],n=t=0;e>=0?e>=t:t>=e;n=e>=0?++t:--t)r.push(Math.round(36*Math.random()).toString(36));return r}().join(""),FASHION.config.idPrefix+t},elementsForSelector:function(e){return Array.prototype.slice.call(document.querySelectorAll(e))}}),e.addRuntimeModule("globals",["selectors"],{$startWatchers:function(){var e,t,n,r,i;n=function(e){return function(t){return e.updateGlobal.bind(e,t)}}(this),r=FASHION.modules.globals,i=[];for(t in r)e=r[t],null!=e.watch&&(e.watch(n(e)),i.push(this.updateGlobal(e)));return i},updateGlobal:function(e){var t,n,r,i,o;if(null!=e&&null!=e.dependents){for(i=e.dependents,o=[],n=0,r=i.length;r>n;n++)t=i[n],o.push("v"===t[0]?this.updateDependencies(t[1]):3===t.length?this.setPropertyOnSelector(t[0],t[1],t[2]):this.regenerateSelector(t[0],t[1]));return o}}}),e.addRuntimeModule("elements",[],{elementFunction:function(e){return function(t){return function(n,r){var i;if(null!=e)return null==n&&null!=r?e:0===n.indexOf("parent")?"parent"===n?e.parentNode:(i=n.replace("parent.",""),t.elementFunction(e.parentNode)(i)):"width"===n?e.clientWidth:"height"===n?e.clientHeight:e.getAttribute(n)}}(this)}}),e.addRuntimeModule("stylesheet-dom",[],{addStylesheet:function(e,t){var n,r;return r=document.createElement("style"),r.setAttribute("type","text/css"),e&&r.setAttribute("id",e),t&&r.setAttribute("class",t),n=document.head||document.getElementsByTagName("head")[0],n.appendChild(r),r},removeStylesheet:function(e){return e&&e.parentNode?e.parentNode.removeChild(e):void 0},getStylesheet:function(e){var t;return(t=document.getElementById(e))?t:this.addStylesheet(e)}}),e.addRuntimeModule("sheets",["stylesheet-dom"],{moveSheetToTop:function(e){var t;return t=document.head||document.getElementsByTagName("head")[0],t.lastChild!==e?(this.removeStylesheet(e),t.appendChild(e)):void 0},setRuleOnSheet:function(e,t,n,r,i){var o,a,s,u;null==i&&(i=!0),e instanceof HTMLStyleElement&&(e=e.sheet),e.rules||(e.rules=e.cssRules),u=e.rules;for(o in u)if(a=u[o],a.selectorText===t)return a.style.setProperty(n,r),void(i&&(s=a.cssText,e.removeRule(o),e.insertRule(s,e.rules.length)));return e.insertRule(""+t+" {"+n+": "+r+";}",e.rules.length)}}),window.fashion.$functions={random:new f({output:e.$type.Number,evaluate:function(){return Math.random()}}),round:new f({output:e.$type.Number,unitFrom:0,evaluate:function(e){return Math.round(e.value)}}),min:new f({output:e.$type.Number,unitFrom:0,evaluate:function(){var e,t,n,r;for(t=9007199254740992,n=0,r=arguments.length;r>n;n++)e=arguments[n],e.value<t&&(t=e.value);return t}}),max:new f({output:e.$type.Number,unitFrom:0,evaluate:function(){var e,t,n,r;for(t=-9007199254740992,n=0,r=arguments.length;r>n;n++)e=arguments[n],e.value>t&&(t=e.value);return t}}),toggle:new f({output:e.$type.Number,unitFrom:0,evaluate:function(e,t,n){return e.value===t.value?n.value:t.value}}),set:new f({output:e.$type.None,capabilities:["variables","types"],evaluate:function(e,t,n){return setTimeout(function(n){return function(){return n.setVariable(e.value,t.value)}}(this),this.timeInMs(n))}})},e.$extend(window.fashion.$functions,{"@":new f({output:e.$type.Number,unit:"",dynamic:!0,evaluate:function(e,t,n){var r,i;return n||(n=document),r=this.querySelector(e.value),i=this.getComputedStyle(r),i[t.value]}})}),e.$extend(window.fashion.$functions,{rgb:new f({output:e.$type.Color,evaluate:function(e,t,n){return"rgb("+parseInt(e.value)+","+parseInt(t.value)+","+parseInt(n.value)+")"}}),rgba:new f({output:e.$type.Color,evaluate:function(e,t,n,r){return"rgba("+parseInt(e.value)+","+parseInt(t.value)+","+parseInt(n.value)+","+r.value+")"}}),hsl:new f({output:e.$type.Color,evaluate:function(e,t,n){return"hsl("+parseInt(e.value)+","+parseInt(t.value)+"%,"+parseInt(n.value)+"%)"}}),hsla:new f({output:e.$type.Color,evaluate:function(e,t,n,r){return"hsla("+parseInt(e.value)+","+parseInt(t.value)+"%,"+parseInt(n.value)+"%,"+r.value+")"}}),hsb:new f({output:e.$type.Color,capabilities:["colors"],evaluate:function(e,t,n){var r,i,o;return o=this.hsbTOrgb(e.value,t.value,n.value),i=o.r,r=o.g,n=o.b,"rgb("+parseInt(i)+","+parseInt(r)+","+parseInt(n)+")"}}),hsba:new f({output:e.$type.Color,capabilities:["colors"],evaluate:function(e,t,n,r){var i,o,a;return a=this.hsbTOrgb(e.value,t.value,n.value),o=a.r,i=a.g,n=a.b,"rgba("+parseInt(o)+","+parseInt(i)+","+parseInt(n)+","+r.value+")"}}),changeAlpha:new f({output:window.fashion.$type.Color,capabilities:["colors"],evaluate:function(e,t){var n;return n=this.cssTOjs(e.value,this),"rgba("+n.r+","+n.g+","+n.b+","+t.value+")"}}),brighten:new f({output:window.fashion.$type.Color,capabilities:["colors"],evaluate:function(e,t){var n,r,i;return i=t.value,n=1+(i>1?i/100:i),r=this.cssTOjs(e.value,this),r.r=parseInt(Math.max(r.r*n,0)),r.g=parseInt(Math.max(r.g*n,0)),r.b=parseInt(Math.max(r.b*n,0)),"rgba("+r.r+","+r.g+","+r.b+","+r.a+")"}}),darken:new f({output:window.fashion.$type.Color,capabilities:["colors"],evaluate:function(e,t){var n,r,i;return i=t.value,n=1-(i>1?i/100:i),r=this.cssTOjs(e.value,this),r.r=parseInt(Math.max(r.r*n,0)),r.g=parseInt(Math.max(r.g*n,0)),r.b=parseInt(Math.max(r.b*n,0)),"rgba("+r.r+","+r.g+","+r.b+","+r.a+")"}})}),e.$extend(window.fashion.$functions,new(function(){function t(){var t,n,r,i,o;for(r=["matrix","matrix3d","translate","translate3d","translateX","translateY","translateZ","scale","scale3d","scaleX","scaleY","scaleZ","rotate","rotate3d","rotateX","rotateY","rotateZ","skew","skewX","skewY","perspective"],t=function(e){var t;return t='var a = arguments;\nvar s = "'+e+'(";\nfor(var i = 0; i < a.length; i++){\n	s += a[i].value;\n	if(i<a.length-1)s += ",";\n}\nreturn s + ")";',new Function(t)},i=0,o=r.length;o>i;i++)n=r[i],this[n]=new f({mode:e.$runtimeMode["static"],output:e.$type.String,evaluate:t(n)})}return t}())),window.fashion.$properties={"text-style":new w({replace:!0,compile:function(e){var t,n,r,i,o;if(n=[],t=function(e){return function(t){if("string"==typeof t){if("'"===t[0]||'"'===t[0])return n.push(t);switch(t){case"serif":n.push("serif");break;case"sans-serif":n.push("sans-serif");break;case"monospace":n.push("monospace");break;case"italic":e.setProperty("font-style","italic");break;case"oblique":e.setProperty("font-style","oblique");break;case"bold":e.setProperty("font-weight","bolder");break;case"light":e.setProperty("font-weight","lighter");break;case"underline":e.setProperty("text-decoration","underline");break;case"overline":e.setProperty("text-decoration","overline");break;case"line-through":e.setProperty("text-decoration","line-through");break;case"strikethrough":e.setProperty("text-decoration","line-through")}return-1!==t.indexOf("pt")||-1!==t.indexOf("px")?e.setProperty("font-size",t):void 0}}}(this),e instanceof Array)for(i=0,o=e.length;o>i;i++)r=e[i],t(r);else t(e);return this.setProperty("font-family",n.join(", "))}})},e.$extend(window.fashion.$properties,{pin:new w({replace:!0,compile:function(e){var t,n,r,i,o;return"object"==typeof e&&(e.length>2||e[0]instanceof Array)&&this.throwError("Valid arguments: '{x}px {y}px' or '{both}px'"),this.setProperty("position","absolute"),n=i=o=t=void 0,r=function(e){switch(e){case"left":return n="0px";case"right":return i="0px";case"top":return o="0px";case"bottom":return t="0px";case"center":return n="@self.parent.width / 2 - @self.width / 2",o="@self.parent.height / 2 - @self.height / 2";default:return this.throwError("Invalid position: "+e)}},"object"==typeof e?(r(e[0]),2===e.length&&r(e[1])):"string"==typeof e&&r(e),n?this.setProperty("left",this.parseValue(n)):this.setProperty("right",this.parseValue(i)),o?this.setProperty("top",this.parseValue(o)):this.setProperty("bottom",this.parseValue(t))}})}),e.$extend(window.fashion.$properties,new(function(){function t(){var t,n,r,i,o,a,s,u,l;for(r=["click","dblclick","mousedown","mouseup","drag","dragdrop","dragend","drop","blur","change","focus","focusin","focusout","submit","reset","keydown","keyup"],t=function(e){var t;return t="if(element.getAttribute('data-hastrigger-"+e+"'))return;\nelement.addEventListener('"+e+"', function(eo){\n	eo.stopPropagation();\n	evaluate();\n}, false);\nelement.setAttribute('data-hastrigger-"+e+"', 'true');",new Function("element","value","evaluate",t)},a=0,u=r.length;u>a;a++)i=r[a],this["on-"+i]=new w({replace:!0,mode:e.$runtimeMode.triggered|e.$runtimeMode.individual,apply:t(i)});for(o=["mouseenter","mouseleave","mousemove","mouseout","mouseover","dragenter","dragexit","draggesture","dragleave","dragover","dragstart"],n=function(e){var t;return t="if(element.getAttribute('data-hastrigger-"+e+"'))return;\nelement.addEventListener('"+e+"', evaluate, false);\nelement.setAttribute('data-hastrigger-"+e+"', 'true');",new Function("element","value","evaluate",t)},s=0,l=o.length;l>s;s++)i=o[s],this["on-"+i]=new w({replace:!0,mode:e.$runtimeMode.triggered|e.$runtimeMode.individual,apply:n(i)})}return t}())),window.fashion.$blocks={},window.fashion.$blocks.transition=new p({capabilities:["transitionBlock"],compile:function(e,t){var n,r,i,o,a,s,u,l,d,c,p;for(l=e[0],d=/(\s*([0-9\-\.\s\%]+?\%|start|begin|finish)\s?\{|\$([\w\-]+)\:[\s]*(.*?)[;\n]|\}|\{)/g,s={},p={},o=u=0,i=n="",r=1e3;--r>0&&(c=d.exec(t));)n+=t.substring(u,c.index),u=c.index,c[2]&&0===o&&(i=c[2],c[2].indexOf("-")>0&&this.requireModule("transitionRangeBlock"),o++,n="",u=c[0].length+c.index),c[3]&&c[4]&&0===o&&(p.$vars||(p.$vars=[]),p.$vars.push(c[3]),this.addVariable(c[3],c[4])),"{"===c[0]?o++:"}"===c[0]&&(o--,0===o&&(s[i]=n,n="",i=""));for(a in s)t=s[a],p[a]=this.parse(t).selectors;return this.runtimeObject.transitions[l]=p},runtimeObject:{transitions:{}}}),e.addRuntimeModule("transitionBlock",["wait","selectors","types","sheets"],{transitionTiming:{start:10,end:5,settle:1},triggerTransition:function(e,t,n){var r,i,o,a,s,u,l,d,c;if(t=this.timeInMs(t),d=FASHION.modules.blocks.transition.transitions[e],null==d)return this.throwError("Transition '"+e+"' does not exist");c=this.addStylesheet(void 0,"FASHION-transition::temporary-"+e),s=this.getStylesheet("FASHION-transition::properties-"+e),this.moveSheetToTop(s);for(a in d)u=d[a],"$"!==a[0]&&("start"===a||"begin"===a?l=0:"finish"===a?l=t+this.transitionTiming.start:(o=parseFloat(a.split("-")[0])/100*t,l=o+this.transitionTiming.start),r=-1!==a.indexOf("-")?this.transitionKeyframeRange(a,u,t,c.sheet,n):this.transitionKeyframeSingle(u,t,c.sheet,n),l>0?this.wait(l,r.bind(this)):r.bind(this)());return i=t+this.transitionTiming.start+this.transitionTiming.end,this.wait(i,function(e){return function(){return e.removeStylesheet(c)}}(this))},transitionKeyframeSingle:function(e,t,n,r){return function(){var i,o,a;o=this.getStylesheet("FASHION-transition::properties-"+name);for(i in e)a=e[i],this.transitionSelector(a,t,n,o,r)}},transitionSelector:function(e,t,n,r,i,o){var a,s,u,l,d,c;for(console.log(arguments),a=e.properties,u=[],d=0,c=a.length;c>d;d++)s=a[d],"object"==typeof s.value&&s.value.transition&&u.push(s);return l=this.generateCSSTransitions.call(this,u,t,i),o=o||this.evaluate(e.name,0,i),n.insertRule(""+o+" {"+l+"}",n.rules.length),this.wait(this.transitionTiming.settle,function(e){return function(t,n){return function(){var o,a,u,l;for(l=[],a=0,u=n.length;u>a;a++)s=n[a],o=e.evaluate(s.value,0,i),l.push(e.setRuleOnSheet(r,t,s.name,o));return l}}}(this)(o,a))},generateCSSTransitions:function(e,t,n){var r,i,o,a,s,u,l;for(r="transition: ",u=0,l=e.length;l>u;u++)a=e[u],a.value.transition&&(s=a.value.transition,i=parseFloat(this.evaluate(s.duration,0,n))/100*t,o=null!=i?""+i+"ms":s.duration,r+=""+a.name+" "+o+" "+(s.easing||"")+" "+(s.delay||"")+",");return r=r.substr(0,r.length-1)+";",r=[r,"-webkit-"+r,"-moz-"+r,"-ms-"+r].join("")}}),e.addRuntimeModule("transitionRangeBlock",["individualizedHelpers"],{transitionKeyframeRange:function(e,t,n,r,i){return function(){var o,a,s,u,l,d,c,p,f,h,m,w;if(m=parseFloat(e.split("-")[0])/100*n,a=parseFloat(e.split("-")[1])/100*n,m>=a)return this.throwError("Range must start before it ends.");h=a-m,u=this.getStylesheet("FASHION-transition::properties-"+name),w=[];for(p in t)c=t[p],d=this.evaluate(c.name,0,i),l=this.elementsForSelector(d),f=h/l.length,w.push(function(){var e;e=[];for(s in l)o=l[s],o.id||o.setAttribute("id",this.generateRandomId()),e.push(this.wait(f*s,function(e){return function(t,o){return function(){var a,s;return s="#"+o.id,(a=e.transitionSelector.bind(e))(t,n,r,u,i,s)}}}(this)(c,o)));return e}.call(this));return w}}}),window.fashion.$functions.trigger=new f({output:e.$type.None,unit:"",mode:e.$runtimeMode.individual,evaluate:function(e,t,n){var r,i,o;for(r in n)o=n[r],n[r]=o.value;return i=FASHION.runtime.triggerTransition,i.call(this,e.value,t,n)}}),window.fashion.$globals={width:new h({type:e.$type.Number,unit:"px",get:function(){return window.innerWidth},watch:function(e){return window.addEventListener("resize",e,!1)}}),height:new h({type:e.$type.Number,unit:"px",get:function(){return window.innerHeight},watch:function(e){return window.addEventListener("resize",e,!1)}}),scrolly:new h({type:e.$type.Number,unit:"px",get:function(){return window.scrollY},watch:function(e){return window.addEventListener("onscroll",e)}}),scrollx:new h({type:e.$type.Number,unit:"px",get:function(){return window.scrollX},watch:function(e){return window.addEventListener("onscroll",e)}}),mousey:new h({type:e.$type.Number,unit:"px",get:function(){return window.mouseY||0},watch:function(e){return window.addEventListener("mousemove",function(t){return window.mouseY=t.pageY,e()})}}),mousex:new h({type:e.$type.Number,unit:"px",get:function(){return window.mouseX||0},watch:function(e){return window.addEventListener("mousemove",function(t){return window.mouseX=t.pageX,e()})}}),pixelratio:new h({type:e.$type.Number,get:function(){return window.devicePixelRatio},watch:function(e){var t;return t=window.devicePixelRatio,setInterval(function(){return window.devicePixelRatio!==t&&e(),t=window.devicePixelRatio},1e3)}})}}();
